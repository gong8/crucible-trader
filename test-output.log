Scope: 10 of 11 workspace projects
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/risk test: (node:80435) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:80435) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/metrics test: (node:80434) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:80434) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: (node:80436) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:80436) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/logger test: (node:80433) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:80433) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: ✔ createDefaultRiskLimits returns expected default values (0.579167ms)
packages/risk test: ✔ createDefaultRiskLimits returns readonly object structure (0.105333ms)
packages/risk test: ✔ createDefaultRiskLimits returns new object on each call (0.461167ms)
packages/risk test: ✔ default risk limits are positive numbers (0.073584ms)
packages/risk test: ✔ default risk limits are within reasonable ranges (0.086167ms)
packages/risk test: ✔ default risk limits have expected property types (0.089916ms)
packages/risk test: ✔ maxDailyLossPct default allows for reasonable drawdown (0.05425ms)
packages/risk test: ✔ maxPositionPct default prevents over-concentration (0.052416ms)
packages/risk test: ✔ orderCap default provides reasonable trade sizing (0.058167ms)
packages/risk test: ✔ killSwitchDrawdownPct default protects against catastrophic losses (0.096292ms)
packages/risk test: ✔ cooldownMinutes default allows for recovery period (0.098667ms)
packages/risk test: ✔ risk limits are consistent with each other (0.089875ms)
packages/report test: ✔ createReportManifest returns a report manifest with title (0.562125ms)
packages/report test: ✔ createReportManifest returns expected placeholder title (0.077834ms)
packages/report test: ✔ createReportManifest returns readonly structure (0.070209ms)
packages/report test: ✔ createReportManifest returns new object on each call (0.475625ms)
packages/report test: ✔ report manifest has correct interface structure (0.07825ms)
packages/report test: ✔ report manifest title is non-empty (0.054791ms)
packages/report test: ✔ report manifest title contains expected keywords (0.076708ms)
packages/risk test: ℹ tests 12
packages/risk test: ℹ suites 0
packages/risk test: ℹ pass 12
packages/risk test: ℹ fail 0
packages/risk test: ℹ cancelled 0
packages/risk test: ℹ skipped 0
packages/risk test: ℹ todo 0
packages/risk test: ℹ duration_ms 798.781542
packages/risk test: Done
packages/report test: ℹ tests 7
packages/report test: ℹ suites 0
packages/report test: ℹ pass 7
packages/report test: ℹ fail 0
packages/report test: ℹ cancelled 0
packages/report test: ℹ skipped 0
packages/report test: ℹ todo 0
packages/report test: ℹ duration_ms 797.4575
packages/report test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/metrics test: ✔ calculateReturns computes sequential percentage returns (1.692791ms)
packages/metrics test: ✔ calculateReturns returns empty array for empty input (0.088291ms)
packages/metrics test: ✔ calculateReturns returns empty array for single point (0.071542ms)
packages/metrics test: ✔ calculateReturns handles equity of zero gracefully (0.060167ms)
packages/metrics test: ✔ calculateReturns handles negative equity (0.059292ms)
packages/metrics test: ✔ calculateReturns computes returns for all positive equity (0.059334ms)
packages/metrics test: ✔ calculateReturns handles flat equity curve (0.068833ms)
packages/metrics test: ✔ calculateSharpe returns zero when variance is zero (0.125917ms)
packages/metrics test: ✔ calculateSharpe returns zero for empty points (0.058625ms)
packages/metrics test: ✔ calculateSharpe returns zero for single point (0.1195ms)
packages/metrics test: ✔ calculateSharpe computes value for increasing equity (0.071416ms)
packages/metrics test: ✔ calculateSharpe handles flat equity curve (0.059708ms)
packages/metrics test: ✔ calculateSharpe with custom risk-free rate (0.061792ms)
packages/metrics test: ✔ calculateSharpe handles volatile equity curve (0.050333ms)
packages/metrics test: ✔ calculateSortino accounts for downside deviation (0.079125ms)
packages/metrics test: ✔ calculateSortino returns zero for empty points (0.041042ms)
packages/metrics test: ✔ calculateSortino returns zero when no downside (0.038334ms)
packages/metrics test: ✔ calculateSortino handles all negative returns (0.06375ms)
packages/metrics test: ✔ calculateSortino with custom risk-free rate (0.051958ms)
packages/metrics test: ✔ calculateSortino handles mixed positive and negative returns (0.042459ms)
packages/metrics test: ✔ calculateMaxDrawdown identifies largest drop (0.06575ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for empty points (0.033708ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for single point (0.033792ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for always increasing equity (0.036875ms)
packages/metrics test: ✔ calculateMaxDrawdown handles severe drawdown (0.039708ms)
packages/metrics test: ✔ calculateMaxDrawdown handles multiple drawdowns (0.041875ms)
packages/metrics test: ✔ calculateMaxDrawdown handles equity going to zero (0.033625ms)
packages/metrics test: ✔ calculateCagr handles chronological data (0.061625ms)
packages/metrics test: ✔ calculateCagr returns zero for empty points (0.040125ms)
packages/metrics test: ✔ calculateCagr returns zero for single point (0.032875ms)
packages/metrics test: ✔ calculateCagr computes positive value for growth (0.049917ms)
packages/metrics test: ✔ calculateCagr computes negative value for loss (0.036208ms)
packages/metrics test: ✔ calculateCagr handles zero starting equity (0.042375ms)
packages/metrics test: ✔ calculateCagr handles negative equity (0.044875ms)
packages/metrics test: ✔ calculateCagr handles invalid timestamps (0.033375ms)
packages/metrics test: ✔ calculateCagr handles same start and end time (0.032167ms)
packages/metrics test: ✔ calculateCagr handles multi-year period (0.041917ms)
packages/metrics test: ✔ calculateMetricsSummary aggregates metrics (0.091584ms)
packages/metrics test: ✔ calculateMetricsSummary returns zeros for empty points (0.040958ms)
packages/metrics test: ✔ calculateMetricsSummary computes totalPnl correctly (0.043959ms)
packages/metrics test: ✔ calculateMetricsSummary computes totalReturn correctly (0.045042ms)
packages/metrics test: ✔ calculateMetricsSummary handles negative returns (0.046875ms)
packages/metrics test: ✔ calculateMetricsSummary handles zero starting equity (0.039167ms)
packages/metrics test: ✔ calculateMetricsSummary all metrics are finite (0.05675ms)
packages/metrics test: ✔ calculateMetricsSummary handles large equity values (0.044334ms)
packages/logger test: ✔ createLogger returns a logger with the correct module name (0.609625ms)
packages/logger test: ✔ logger.log writes JSON formatted output to stdout (1.843917ms)
packages/logger test: ✔ logger.debug calls log with debug level (0.259292ms)
packages/logger test: ✔ logger.info calls log with info level (0.200292ms)
packages/logger test: ✔ logger.warn calls log with warn level (0.173584ms)
packages/logger test: ✔ logger.error writes to stderr and uses error level (0.185125ms)
packages/logger test: ✔ logger includes runId in output when provided (0.165417ms)
packages/logger test: ✔ logger excludes runId when not a string (0.8255ms)
packages/logger test: ✔ logger handles empty metadata (0.161708ms)
packages/logger test: ✔ logger handles complex metadata (0.63ms)
packages/logger test: ✔ logger timestamp is in ISO format (0.177917ms)
packages/logger test: ✔ multiple loggers with different modules don't interfere (0.137625ms)
packages/metrics test: ℹ tests 45
packages/metrics test: ℹ suites 0
packages/metrics test: ℹ pass 45
packages/metrics test: ℹ fail 0
packages/metrics test: ℹ cancelled 0
packages/metrics test: ℹ skipped 0
packages/metrics test: ℹ todo 0
packages/metrics test: ℹ duration_ms 876.36475
packages/metrics test: Done
packages/logger test: ℹ tests 12
packages/logger test: ℹ suites 0
packages/logger test: ℹ pass 12
packages/logger test: ℹ fail 0
packages/logger test: ℹ cancelled 0
packages/logger test: ℹ skipped 0
packages/logger test: ℹ todo 0
packages/logger test: ℹ duration_ms 882.253917
packages/logger test: Done
packages/sdk test: (node:80466) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:80466) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ DataRequestSchema validates valid request (1.3355ms)
packages/sdk test: ✔ DataRequestSchema rejects invalid source (0.404542ms)
packages/sdk test: ✔ DataRequestSchema rejects empty symbol (0.129125ms)
packages/sdk test: ✔ DataRequestSchema rejects invalid timeframe (0.104708ms)
packages/sdk test: ✔ DataRequestSchema accepts all valid sources (0.155084ms)
packages/sdk test: ✔ DataRequestSchema accepts all valid timeframes (0.119542ms)
packages/sdk test: ✔ DataRequestSchema makes adjusted optional (0.062291ms)
packages/sdk test: ✔ DataRequestSchema rejects non-boolean adjusted (0.082125ms)
packages/sdk test: ✔ BacktestRequestSchema validates valid request (0.591875ms)
packages/sdk test: ✔ BacktestRequestSchema rejects empty runName (0.202917ms)
packages/sdk test: ✔ BacktestRequestSchema rejects empty data array (0.195625ms)
packages/sdk test: ✔ BacktestRequestSchema rejects negative fees (0.183375ms)
packages/sdk test: ✔ BacktestRequestSchema rejects non-positive initialCash (0.105375ms)
packages/sdk test: ✔ BacktestRequestSchema accepts optional seed (0.105ms)
packages/sdk test: ✔ BacktestRequestSchema rejects non-integer seed (0.100292ms)
packages/sdk test: ✔ BacktestRequestSchema accepts valid metrics array (0.101959ms)
packages/sdk test: ✔ BacktestRequestSchema rejects invalid metrics (0.103ms)
packages/sdk test: ✔ BacktestResultSchema validates valid result (0.093208ms)
packages/sdk test: ✔ BacktestResultSchema rejects empty runId (0.062542ms)
packages/sdk test: ✔ BacktestResultSchema makes reportMd optional (0.044083ms)
packages/sdk test: ✔ RiskProfileSchema validates valid profile (0.053292ms)
packages/sdk test: ✔ RiskProfileSchema rejects negative percentages (0.049125ms)
packages/sdk test: ✔ RiskProfileSchema rejects negative cooldown (0.044333ms)
packages/sdk test: ✔ RiskProfileSchema rejects non-integer cooldown (0.047667ms)
packages/sdk test: ✔ assertValid returns parsed data for valid input (0.502292ms)
packages/sdk test: ✔ assertValid throws Error for invalid input (0.32125ms)
packages/sdk test: ✔ assertValid error message includes field path (0.085416ms)
packages/sdk test: ✔ assertValid uses default label when not provided (0.115458ms)
packages/sdk test: (node:80467) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:80467) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ sma crossover emits buy and sell signals on crossovers (2.250125ms)
packages/sdk test: ✔ momentum strategy reacts to sustained moves (0.235834ms)
packages/sdk test: ✔ mean reversion strategy triggers on z-score extremes (0.223375ms)
packages/sdk test: ✔ breakout strategy emits signals on range breaks (0.2635ms)
packages/sdk test: (node:80468) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:80468) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ all strategy defaults satisfy their schemas (1.20675ms)
packages/sdk test: ✔ invalid SMA crossover params throw schema errors (0.22425ms)
packages/sdk test: ℹ tests 34
packages/sdk test: ℹ suites 0
packages/sdk test: ℹ pass 34
packages/sdk test: ℹ fail 0
packages/sdk test: ℹ cancelled 0
packages/sdk test: ℹ skipped 0
packages/sdk test: ℹ todo 0
packages/sdk test: ℹ duration_ms 911.325834
packages/sdk test: Done
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/strategy-controls.test.tsx
apps/web test: (node:80616) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:80616) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: (node:80617) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:80617) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ▶ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ✔ Cache invalidates after dataset change (5.730417ms)
packages/data test: ✔ CsvSource loads, dedupes, sorts, and caches bars (15.758125ms)
packages/data test: (node:80619) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:80619) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ CsvSource throws descriptive error when file doesn't exist (4.629708ms)
packages/data test: ✔ CsvSource handles malformed CSV gracefully (4.817458ms)
packages/data test: ✔ CsvSource handles empty CSV file (5.706875ms)
apps/web test: ✔ apiRoute normalizes paths and uses default base (35.443ms)
packages/data test: ✔ CsvSource handles CSV with only headers (8.720042ms)
apps/web test: ✔ apiRoute respects NEXT_PUBLIC_API_BASE_URL override (6.388709ms)
packages/data test: ✔ CsvSource handles missing required columns (7.126875ms)
packages/data test: ✔ TiingoSource throws error when API key is missing (0.447666ms)
packages/data test: ✔ TiingoSource requires start and end dates (0.152041ms)
packages/data test: ✔ TiingoSource handles HTTP errors gracefully (1.489125ms)
packages/data test: ✔ TiingoSource handles malformed JSON response (1.377791ms)
packages/data test: ✔ TiingoSource handles empty response array (3.813084ms)
packages/data test: ✔ TiingoSource handles non-array response (1.331ms)
packages/data test: ✔ PolygonSource throws error when API key is missing (0.262625ms)
packages/data test: ✔ PolygonSource requires start and end dates (0.212667ms)
packages/data test: ✔ PolygonSource handles HTTP errors (1.314625ms)
packages/data test: ✔ PolygonSource handles missing results in response (1.364334ms)
packages/data test: ✔ PolygonSource filters out bars with missing data (4.792917ms)
packages/data test: ✔ PolygonSource handles invalid timestamp formats (0.958209ms)
packages/data test: (node:80621) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:80621) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ slugify converts uppercase to lowercase (0.839417ms)
packages/data test: ✔ slugify replaces spaces with underscores (0.080916ms)
packages/data test: ✔ slugify replaces special characters with underscores (0.069875ms)
packages/data test: ✔ slugify removes leading and trailing underscores (0.857542ms)
packages/data test: ✔ slugify collapses consecutive special characters (0.069708ms)
packages/data test: ✔ slugify handles empty string (0.045792ms)
packages/data test: ✔ slugify handles numeric strings (0.049875ms)
packages/data test: ✔ slugify handles mixed alphanumeric (0.056167ms)
packages/data test: ✔ slugify handles unicode characters (0.058625ms)
packages/data test: ✔ sanitizeBar returns valid bar unchanged (0.611791ms)
packages/data test: ✔ sanitizeBar returns null for null input (0.06325ms)
packages/data test: ✔ sanitizeBar returns null for undefined input (0.048875ms)
packages/data test: ✔ sanitizeBar returns null when timestamp is missing (0.057959ms)
packages/data test: ✔ sanitizeBar returns null when timestamp is not a string (0.065875ms)
packages/data test: ✔ sanitizeBar returns null when open is missing (0.055667ms)
packages/data test: ✔ sanitizeBar returns null when open is not a number (0.038459ms)
packages/data test: ✔ sanitizeBar returns null when high is missing (0.0345ms)
packages/data test: ✔ sanitizeBar returns null when low is missing (0.034ms)
packages/data test: ✔ sanitizeBar returns null when close is missing (0.041833ms)
packages/data test: ✔ sanitizeBar returns null when volume is missing (0.032958ms)
packages/data test: ✔ sanitizeBar accepts bar with zero volume (0.043875ms)
packages/data test: ✔ sanitizeBar accepts bar with negative prices (edge case) (0.04ms)
packages/data test: ✔ sanitizeBar filters out extra properties (0.074875ms)
packages/data test: ✔ filterBarsForRequest includes bars within range (0.0975ms)
packages/data test: ✔ filterBarsForRequest excludes bars before start (0.053458ms)
packages/data test: ✔ filterBarsForRequest excludes bars after end (0.049833ms)
packages/data test: ✔ filterBarsForRequest includes bars at exact boundaries (0.047375ms)
packages/data test: ✔ filterBarsForRequest returns empty array when no bars match (0.040542ms)
packages/data test: ✔ filterBarsForRequest excludes bars with invalid timestamps (0.041167ms)
packages/data test: ✔ filterBarsForRequest handles empty bar array (0.050042ms)
packages/data test: ✔ filterBarsForRequest handles missing start date (0.041875ms)
packages/data test: ✔ filterBarsForRequest handles missing end date (0.057167ms)
packages/data test: ✔ sortBarsChronologically sorts bars in ascending order (0.062916ms)
packages/data test: ✔ sortBarsChronologically handles already sorted bars (0.041542ms)
packages/data test: ✔ sortBarsChronologically handles empty array (0.038042ms)
packages/data test: ✔ sortBarsChronologically handles single bar (0.049042ms)
packages/data test: ✔ sortBarsChronologically handles bars with same timestamp (0.039958ms)
packages/data test: ✔ sortBarsChronologically returns a new array (0.06575ms)
packages/data test: ✔ sortBarsChronologically does not mutate original array (0.054167ms)
packages/data test: ✔ sortBarsChronologically handles bars with invalid timestamps (0.041458ms)
packages/data test: ✔ sortBarsChronologically handles intraday timestamps correctly (0.0425ms)
packages/data test: (node:80622) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:80622) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ PolygonSource fetches, caches, and filters aggregates (8.131708ms)
packages/data test: (node:80623) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:80623) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ TiingoSource fetches, caches, and filters bars (8.4375ms)
packages/data test: ℹ tests 62
packages/data test: ℹ suites 0
packages/data test: ℹ pass 62
packages/data test: ℹ fail 0
packages/data test: ℹ cancelled 0
packages/data test: ℹ skipped 0
packages/data test: ℹ todo 0
packages/data test: ℹ duration_ms 1556.967416
packages/data test: Done
apps/web test: (node:80618) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:80618) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ✔ generateRunName slugs strings and lowercases (0.685667ms)
apps/web test: ✔ buildDatasetOverride returns undefined when flag or dataset missing (0.102792ms)
apps/web test: ✔ buildDatasetOverride maps dataset fields when provided (1.440166ms)
apps/web test: ✔ buildDatasetOverride falls back to current date when dataset is missing range (0.137625ms)
apps/web test: ✔ buildRequestSafely returns a fully typed BacktestRequest (1.145333ms)
apps/web test: ✔ buildRequestSafely omits metrics when list is empty (0.115459ms)
apps/web test: ✔ buildRequestSafely surfaces strategy validation errors (0.449833ms)
apps/web test: ✔ buildRequestSafely handles optional seed and numeric coercion (0.102875ms)
apps/web test: (node:80620) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:80620) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ✔ mapZodIssues maps field errors to a lookup object (0.98975ms)
apps/web test: ✔ StrategyControls renders inputs with expected defaults (55.236583ms)
apps/web test: ✔ StrategyControls surfaces field errors next to the input (3.442208ms)
apps/web test: ℹ tests 13
apps/web test: ℹ suites 0
apps/web test: ℹ pass 13
apps/web test: ℹ fail 0
apps/web test: ℹ cancelled 0
apps/web test: ℹ skipped 0
apps/web test: ℹ todo 0
apps/web test: ℹ duration_ms 2834.481208
apps/web test: Done
packages/engine test$ tsc -p tsconfig.test.json && node --test dist-test/test/engine.test.js dist-test/test/engine-integration.test.js
packages/engine test: ✔ runBacktest fails when data source file is missing (4.942959ms)
packages/engine test: ✔ runBacktest fails with empty data array (0.800791ms)
packages/engine test: ✔ runBacktest fails with unknown strategy (1.964208ms)
packages/engine test: ✔ runBacktest validates strategy parameters (1.340917ms)
packages/engine test: ✔ runBacktest generates deterministic results with same seed (50.326042ms)
packages/engine test: ✔ runBacktest handles zero initial cash (0.26275ms)
packages/engine test: ✔ runBacktest handles negative costs (0.1765ms)
packages/engine test: ✔ runBacktest creates all required artifacts (22.281625ms)
packages/engine test: ✔ runBacktest enforces risk limits - kill switch on drawdown (23.024709ms)
packages/engine test: ✔ runBacktest handles invalid date ranges (0.958625ms)
packages/engine test: ✔ runBacktest validates all metric keys are recognized (19.176334ms)
packages/engine test: ✔ runBacktest executes SMA crossover strategy successfully (35.4005ms)
packages/engine test: ℹ tests 12
packages/engine test: ℹ suites 0
packages/engine test: ℹ pass 12
packages/engine test: ℹ fail 0
packages/engine test: ℹ cancelled 0
packages/engine test: ℹ skipped 0
packages/engine test: ℹ todo 0
packages/engine test: ℹ duration_ms 327.222917
packages/engine test: Done
services/api test$ pnpm run build && node --loader ts-node/esm --test src/db/index.test.ts test/queue.test.ts && node test/runs.e2e.test.js
services/api test: > @crucible-trader/api@0.0.1 build /Users/gong/Programming/Projects/crucible-trader/services/api
services/api test: > tsc -p .
services/api test: (node:80842) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:80842) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ✔ insertRun persists metadata and listRuns returns it (52.316375ms)
services/api test: ✔ saveRunResult stores summary and artifacts for later retrieval (2.339667ms)
services/api test: ✔ reset clears runs and artifacts tables (1.621834ms)
services/api test: ✔ upsertDataset persists metadata (1.321083ms)
services/api test: ✔ risk profiles can be stored and retrieved (1.562208ms)
services/api test: (node:80843) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:80843) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ✔ JobQueue can be instantiated with database (3.442291ms)
services/api test: ✔ JobQueue accepts custom poll interval (0.868833ms)
services/api test: ✔ JobQueue.onJob registers handler and starts polling (203.495125ms)
services/api test: ✔ JobQueue processes queued jobs (204.401083ms)
services/api test: ✔ JobQueue.stop stops polling (207.1035ms)
services/api test: ✔ JobQueue updates job status to processing (60.021417ms)
services/api test: ✔ JobQueue handles handler errors gracefully (116.336625ms)
services/api test: ✔ JobQueue handles invalid JSON in requestJson (105.5435ms)
services/api test: ✔ JobQueue supports multiple handlers (103.299666ms)
services/api test: ✔ JobQueue.enqueue triggers immediate poll (3.377917ms)
services/api test: ✔ JobQueue does not process same job twice (202.767834ms)
services/api test: ✔ JobQueue ignores jobs with status other than queued (154.761541ms)
services/api test: ✔ JobQueue processes jobs in order (327.127583ms)
services/api test: ℹ tests 18
services/api test: ℹ suites 0
services/api test: ℹ pass 18
services/api test: ℹ fail 0
services/api test: ℹ cancelled 0
services/api test: ℹ skipped 0
services/api test: ℹ todo 0
services/api test: ℹ duration_ms 2701.95425
services/api test: ✔ POST /api/runs executes a backtest end-to-end (62.180917ms)
services/api test: ℹ tests 1
services/api test: ℹ suites 0
services/api test: ℹ pass 1
services/api test: ℹ fail 0
services/api test: ℹ cancelled 0
services/api test: ℹ skipped 0
services/api test: ℹ todo 0
services/api test: ℹ duration_ms 64.766791
services/api test: Done
services/backtest-worker test$ CRUCIBLE_WORKER_AUTOSTART=false node --loader ts-node/esm --test test/backtest-worker.test.ts
services/backtest-worker test: (node:80926) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/backtest-worker test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/backtest-worker test: (Use `node --trace-warnings ...` to show where the warning was created)
services/backtest-worker test: (node:80926) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/backtest-worker test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/backtest-worker test: [dotenv@17.2.3] injecting env (2) from ../../.env -- tip: ⚙️  suppress all logs with { quiet: true }
services/backtest-worker test: [dotenv@17.2.3] injecting env (0) from .env -- tip: ⚙️  load multiple .env files with { path: ['.env.local', '.env'] }
services/backtest-worker test: ✔ createManifestWriter writes manifest with defaults and dataset metadata (6.156833ms)
services/backtest-worker test: ✔ createManifestWriter keeps explicit report path and metadata (1.664ms)
services/backtest-worker test: ✔ createJobHandler processes job successfully and persists result (0.537542ms)
services/backtest-worker test: ✔ createJobHandler skips risk profile lookup when not provided (0.165708ms)
services/backtest-worker test: ✔ createJobHandler marks runs as failed when runBacktest throws (0.384916ms)
services/backtest-worker test: ℹ tests 5
services/backtest-worker test: ℹ suites 0
services/backtest-worker test: ℹ pass 5
services/backtest-worker test: ℹ fail 0
services/backtest-worker test: ℹ cancelled 0
services/backtest-worker test: ℹ skipped 0
services/backtest-worker test: ℹ todo 0
services/backtest-worker test: ℹ duration_ms 766.832541
services/backtest-worker test: Done
