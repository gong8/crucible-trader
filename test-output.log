Scope: 10 of 11 workspace projects
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/logger test: (node:54033) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:54033) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/metrics test: (node:54036) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:54036) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: (node:54035) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:54035) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: (node:54034) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:54034) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: ‚úî createDefaultRiskLimits returns expected default values (0.584167ms)
packages/risk test: ‚úî createDefaultRiskLimits returns readonly object structure (0.107292ms)
packages/risk test: ‚úî createDefaultRiskLimits returns new object on each call (0.465958ms)
packages/risk test: ‚úî default risk limits are positive numbers (0.07375ms)
packages/risk test: ‚úî default risk limits are within reasonable ranges (0.085959ms)
packages/risk test: ‚úî default risk limits have expected property types (0.080958ms)
packages/risk test: ‚úî maxDailyLossPct default allows for reasonable drawdown (0.057041ms)
packages/risk test: ‚úî maxPositionPct default prevents over-concentration (0.056875ms)
packages/risk test: ‚úî orderCap default provides reasonable trade sizing (0.054041ms)
packages/risk test: ‚úî killSwitchDrawdownPct default protects against catastrophic losses (0.127875ms)
packages/risk test: ‚úî cooldownMinutes default allows for recovery period (0.056542ms)
packages/risk test: ‚úî risk limits are consistent with each other (0.051125ms)
packages/risk test: ‚Ñπ tests 12
packages/risk test: ‚Ñπ suites 0
packages/risk test: ‚Ñπ pass 12
packages/risk test: ‚Ñπ fail 0
packages/risk test: ‚Ñπ cancelled 0
packages/risk test: ‚Ñπ skipped 0
packages/risk test: ‚Ñπ todo 0
packages/risk test: ‚Ñπ duration_ms 615.857333
packages/risk test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/report test: ‚úî createReportManifest returns a report manifest with title (0.56875ms)
packages/report test: ‚úî createReportManifest returns expected placeholder title (0.095ms)
packages/report test: ‚úî createReportManifest returns readonly structure (0.069584ms)
packages/report test: ‚úî createReportManifest returns new object on each call (0.485958ms)
packages/report test: ‚úî report manifest has correct interface structure (0.075333ms)
packages/report test: ‚úî report manifest title is non-empty (0.051125ms)
packages/report test: ‚úî report manifest title contains expected keywords (0.08375ms)
packages/report test: ‚Ñπ tests 7
packages/report test: ‚Ñπ suites 0
packages/report test: ‚Ñπ pass 7
packages/report test: ‚Ñπ fail 0
packages/report test: ‚Ñπ cancelled 0
packages/report test: ‚Ñπ skipped 0
packages/report test: ‚Ñπ todo 0
packages/report test: ‚Ñπ duration_ms 653.189834
packages/report test: Done
packages/metrics test: ‚úî calculateReturns computes sequential percentage returns (1.578541ms)
packages/metrics test: ‚úî calculateReturns returns empty array for empty input (0.076375ms)
packages/metrics test: ‚úî calculateReturns returns empty array for single point (0.068875ms)
packages/metrics test: ‚úî calculateReturns handles equity of zero gracefully (0.061625ms)
packages/metrics test: ‚úî calculateReturns handles negative equity (0.066333ms)
packages/metrics test: ‚úî calculateReturns computes returns for all positive equity (0.064583ms)
packages/metrics test: ‚úî calculateReturns handles flat equity curve (0.069083ms)
packages/metrics test: ‚úî calculateSharpe returns zero when variance is zero (0.14275ms)
packages/metrics test: ‚úî calculateSharpe returns zero for empty points (0.071417ms)
packages/metrics test: ‚úî calculateSharpe returns zero for single point (0.091667ms)
packages/metrics test: ‚úî calculateSharpe computes value for increasing equity (0.078167ms)
packages/metrics test: ‚úî calculateSharpe handles flat equity curve (0.046375ms)
packages/metrics test: ‚úî calculateSharpe with custom risk-free rate (0.0425ms)
packages/metrics test: ‚úî calculateSharpe handles volatile equity curve (0.050667ms)
packages/metrics test: ‚úî calculateSortino accounts for downside deviation (0.1045ms)
packages/metrics test: ‚úî calculateSortino returns zero for empty points (0.05625ms)
packages/metrics test: ‚úî calculateSortino returns zero when no downside (0.039166ms)
packages/metrics test: ‚úî calculateSortino handles all negative returns (0.045166ms)
packages/metrics test: ‚úî calculateSortino with custom risk-free rate (0.042709ms)
packages/metrics test: ‚úî calculateSortino handles mixed positive and negative returns (0.036875ms)
packages/metrics test: ‚úî calculateMaxDrawdown identifies largest drop (0.066666ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for empty points (0.035042ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for single point (0.040167ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for always increasing equity (0.034583ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles severe drawdown (0.038208ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles multiple drawdowns (0.043584ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles equity going to zero (0.033208ms)
packages/metrics test: ‚úî calculateCagr handles chronological data (0.060333ms)
packages/metrics test: ‚úî calculateCagr returns zero for empty points (0.042333ms)
packages/metrics test: ‚úî calculateCagr returns zero for single point (0.031084ms)
packages/metrics test: ‚úî calculateCagr computes positive value for growth (0.060792ms)
packages/metrics test: ‚úî calculateCagr computes negative value for loss (0.048417ms)
packages/metrics test: ‚úî calculateCagr handles zero starting equity (0.036291ms)
packages/metrics test: ‚úî calculateCagr handles negative equity (0.042875ms)
packages/metrics test: ‚úî calculateCagr handles invalid timestamps (0.034292ms)
packages/metrics test: ‚úî calculateCagr handles same start and end time (0.043ms)
packages/metrics test: ‚úî calculateCagr handles multi-year period (0.038333ms)
packages/metrics test: ‚úî calculateMetricsSummary aggregates metrics (0.083458ms)
packages/metrics test: ‚úî calculateMetricsSummary returns zeros for empty points (0.038625ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalPnl correctly (0.04175ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalReturn correctly (0.04475ms)
packages/metrics test: ‚úî calculateMetricsSummary handles negative returns (0.046125ms)
packages/metrics test: ‚úî calculateMetricsSummary handles zero starting equity (0.038833ms)
packages/metrics test: ‚úî calculateMetricsSummary all metrics are finite (0.053042ms)
packages/metrics test: ‚úî calculateMetricsSummary handles large equity values (0.044916ms)
packages/logger test: ‚úî createLogger returns a logger with the correct module name (0.595ms)
packages/logger test: ‚úî logger.log writes JSON formatted output to stdout (1.45475ms)
packages/logger test: ‚úî logger.debug calls log with debug level (0.216792ms)
packages/logger test: ‚úî logger.info calls log with info level (0.174959ms)
packages/logger test: ‚úî logger.warn calls log with warn level (0.162875ms)
packages/logger test: ‚úî logger.error writes to stderr and uses error level (0.179417ms)
packages/logger test: ‚úî logger includes runId in output when provided (0.160292ms)
packages/logger test: ‚úî logger excludes runId when not a string (0.76ms)
packages/logger test: ‚úî logger handles empty metadata (0.205625ms)
packages/logger test: ‚úî logger handles complex metadata (0.642625ms)
packages/logger test: ‚úî logger timestamp is in ISO format (0.185458ms)
packages/logger test: ‚úî multiple loggers with different modules don't interfere (0.127625ms)
packages/metrics test: ‚Ñπ tests 45
packages/metrics test: ‚Ñπ suites 0
packages/metrics test: ‚Ñπ pass 45
packages/metrics test: ‚Ñπ fail 0
packages/metrics test: ‚Ñπ cancelled 0
packages/metrics test: ‚Ñπ skipped 0
packages/metrics test: ‚Ñπ todo 0
packages/metrics test: ‚Ñπ duration_ms 694.055125
packages/metrics test: Done
packages/logger test: ‚Ñπ tests 12
packages/logger test: ‚Ñπ suites 0
packages/logger test: ‚Ñπ pass 12
packages/logger test: ‚Ñπ fail 0
packages/logger test: ‚Ñπ cancelled 0
packages/logger test: ‚Ñπ skipped 0
packages/logger test: ‚Ñπ todo 0
packages/logger test: ‚Ñπ duration_ms 705.280875
packages/logger test: Done
packages/sdk test: (node:54055) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:54055) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî DataRequestSchema validates valid request (1.244792ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid source (0.379208ms)
packages/sdk test: ‚úî DataRequestSchema rejects empty symbol (0.123208ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid timeframe (0.090375ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid sources (0.160125ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid timeframes (0.11125ms)
packages/sdk test: ‚úî DataRequestSchema makes adjusted optional (0.059583ms)
packages/sdk test: ‚úî DataRequestSchema rejects non-boolean adjusted (0.074417ms)
packages/sdk test: ‚úî BacktestRequestSchema validates valid request (0.366625ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty runName (0.153666ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty data array (0.08575ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects negative fees (0.117ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-positive initialCash (0.088291ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts optional seed (0.098125ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-integer seed (0.102334ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts valid metrics array (0.467834ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects invalid metrics (0.107542ms)
packages/sdk test: ‚úî BacktestResultSchema validates valid result (0.0855ms)
packages/sdk test: ‚úî BacktestResultSchema rejects empty runId (0.063208ms)
packages/sdk test: ‚úî BacktestResultSchema makes reportMd optional (0.04225ms)
packages/sdk test: ‚úî RiskProfileSchema validates valid profile (0.04825ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative percentages (0.047875ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative cooldown (0.042334ms)
packages/sdk test: ‚úî RiskProfileSchema rejects non-integer cooldown (0.045917ms)
packages/sdk test: ‚úî assertValid returns parsed data for valid input (0.475417ms)
packages/sdk test: ‚úî assertValid throws Error for invalid input (0.311167ms)
packages/sdk test: ‚úî assertValid error message includes field path (0.083458ms)
packages/sdk test: ‚úî assertValid uses default label when not provided (0.127875ms)
packages/sdk test: (node:54056) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:54056) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî sma crossover emits buy and sell signals on crossovers (2.337334ms)
packages/sdk test: ‚úî momentum strategy reacts to sustained moves (0.23525ms)
packages/sdk test: ‚úî mean reversion strategy triggers on z-score extremes (0.217875ms)
packages/sdk test: ‚úî breakout strategy emits signals on range breaks (0.262875ms)
packages/sdk test: (node:54057) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:54057) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî all strategy defaults satisfy their schemas (1.131166ms)
packages/sdk test: ‚úî invalid SMA crossover params throw schema errors (0.19525ms)
packages/sdk test: ‚Ñπ tests 34
packages/sdk test: ‚Ñπ suites 0
packages/sdk test: ‚Ñπ pass 34
packages/sdk test: ‚Ñπ fail 0
packages/sdk test: ‚Ñπ cancelled 0
packages/sdk test: ‚Ñπ skipped 0
packages/sdk test: ‚Ñπ todo 0
packages/sdk test: ‚Ñπ duration_ms 832.417334
packages/sdk test: Done
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/date-range.test.ts test/strategy-controls.test.tsx
apps/web test: (node:54126) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:54126) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: (node:54125) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:54125) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚ñ∂ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ‚úî Cache invalidates after dataset change (1.740917ms)
packages/data test: ‚úî CsvSource loads, dedupes, sorts, and caches bars (7.730042ms)
apps/web test: ‚úî apiRoute normalizes paths and uses default base (27.827042ms)
apps/web test: ‚úî apiRoute respects NEXT_PUBLIC_API_BASE_URL override (3.348833ms)
packages/data test: (node:54127) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:54127) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî CsvSource throws descriptive error when file doesn't exist (7.298125ms)
packages/data test: ‚úî CsvSource handles malformed CSV gracefully (4.532ms)
packages/data test: ‚úî CsvSource handles empty CSV file (2.709667ms)
packages/data test: ‚úî CsvSource handles CSV with only headers (3.320625ms)
packages/data test: ‚úî CsvSource handles missing required columns (2.735459ms)
packages/data test: ‚úî TiingoSource throws error when API key is missing (0.367708ms)
packages/data test: ‚úî TiingoSource requires start and end dates (0.155709ms)
packages/data test: ‚úî TiingoSource handles HTTP errors gracefully (0.813667ms)
packages/data test: ‚úî TiingoSource handles malformed JSON response (0.858958ms)
apps/web test: (node:54128) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:54128) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî computeAvailableRange picks tiingo range when available (0.664959ms)
apps/web test: ‚úî computeAvailableRange aggregates auto range from remote sources (0.54775ms)
apps/web test: ‚úî computeAvailableRange falls back to csv coverage when remote missing (0.083416ms)
apps/web test: ‚úî computeAvailableRange returns null when no dataset exists (0.0565ms)
packages/data test: ‚úî TiingoSource handles empty response array (0.99725ms)
packages/data test: ‚úî TiingoSource handles non-array response (1.143959ms)
packages/data test: ‚úî PolygonSource throws error when API key is missing (0.462167ms)
packages/data test: ‚úî PolygonSource requires start and end dates (0.11375ms)
packages/data test: ‚úî PolygonSource handles HTTP errors (0.925584ms)
packages/data test: ‚úî PolygonSource handles missing results in response (1.648959ms)
packages/data test: ‚úî PolygonSource filters out bars with missing data (3.438833ms)
packages/data test: ‚úî PolygonSource handles invalid timestamp formats (1.093541ms)
packages/data test: (node:54129) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:54129) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî slugify converts uppercase to lowercase (1.224833ms)
packages/data test: ‚úî slugify replaces spaces with underscores (0.110625ms)
packages/data test: ‚úî slugify replaces special characters with underscores (0.0745ms)
packages/data test: ‚úî slugify removes leading and trailing underscores (1.932084ms)
packages/data test: ‚úî slugify collapses consecutive special characters (0.092041ms)
packages/data test: ‚úî slugify handles empty string (0.053208ms)
packages/data test: ‚úî slugify handles numeric strings (0.054375ms)
packages/data test: ‚úî slugify handles mixed alphanumeric (0.059667ms)
packages/data test: ‚úî slugify handles unicode characters (0.059709ms)
packages/data test: ‚úî sanitizeBar returns valid bar unchanged (0.633125ms)
packages/data test: ‚úî sanitizeBar returns null for null input (0.069208ms)
packages/data test: ‚úî sanitizeBar returns null for undefined input (0.040875ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is missing (0.052625ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is not a string (0.042625ms)
packages/data test: ‚úî sanitizeBar returns null when open is missing (0.053ms)
packages/data test: ‚úî sanitizeBar returns null when open is not a number (0.044167ms)
packages/data test: ‚úî sanitizeBar returns null when high is missing (0.037083ms)
packages/data test: ‚úî sanitizeBar returns null when low is missing (0.036459ms)
packages/data test: ‚úî sanitizeBar returns null when close is missing (0.034959ms)
packages/data test: ‚úî sanitizeBar returns null when volume is missing (0.034875ms)
packages/data test: ‚úî sanitizeBar accepts bar with zero volume (0.044125ms)
packages/data test: ‚úî sanitizeBar accepts bar with negative prices (edge case) (0.043083ms)
packages/data test: ‚úî sanitizeBar filters out extra properties (0.094875ms)
packages/data test: ‚úî filterBarsForRequest includes bars within range (0.114333ms)
packages/data test: ‚úî filterBarsForRequest excludes bars before start (0.056292ms)
packages/data test: ‚úî filterBarsForRequest excludes bars after end (0.051ms)
packages/data test: ‚úî filterBarsForRequest includes bars at exact boundaries (0.053417ms)
packages/data test: ‚úî filterBarsForRequest returns empty array when no bars match (0.043166ms)
packages/data test: ‚úî filterBarsForRequest excludes bars with invalid timestamps (0.048833ms)
packages/data test: ‚úî filterBarsForRequest handles empty bar array (0.07825ms)
packages/data test: ‚úî filterBarsForRequest handles missing start date (0.050375ms)
packages/data test: ‚úî filterBarsForRequest handles missing end date (0.053584ms)
packages/data test: ‚úî sortBarsChronologically sorts bars in ascending order (0.078083ms)
packages/data test: ‚úî sortBarsChronologically handles already sorted bars (0.056209ms)
packages/data test: ‚úî sortBarsChronologically handles empty array (0.051917ms)
packages/data test: ‚úî sortBarsChronologically handles single bar (0.062125ms)
packages/data test: ‚úî sortBarsChronologically handles bars with same timestamp (0.049458ms)
packages/data test: ‚úî sortBarsChronologically returns a new array (0.060708ms)
packages/data test: ‚úî sortBarsChronologically does not mutate original array (0.064791ms)
packages/data test: ‚úî sortBarsChronologically handles bars with invalid timestamps (0.046333ms)
packages/data test: ‚úî sortBarsChronologically handles intraday timestamps correctly (0.047625ms)
packages/data test: (node:54131) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:54131) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî PolygonSource fetches, caches, and filters aggregates (8.453416ms)
packages/data test: (node:54132) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:54132) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî TiingoSource fetches, caches, and filters bars (10.520125ms)
packages/data test: ‚Ñπ tests 62
packages/data test: ‚Ñπ suites 0
packages/data test: ‚Ñπ pass 62
packages/data test: ‚Ñπ fail 0
packages/data test: ‚Ñπ cancelled 0
packages/data test: ‚Ñπ skipped 0
packages/data test: ‚Ñπ todo 0
packages/data test: ‚Ñπ duration_ms 1775.703167
packages/data test: Done
apps/web test: (node:54130) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:54130) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî generateRunName slugs strings and lowercases (0.719125ms)
apps/web test: ‚úî buildDatasetOverride returns undefined when flag or dataset missing (0.106125ms)
apps/web test: ‚úî buildDatasetOverride maps dataset fields when provided (1.207042ms)
apps/web test: ‚úî buildDatasetOverride falls back to current date when dataset is missing range (0.120792ms)
apps/web test: ‚úî buildRequestSafely returns a fully typed BacktestRequest (1.238958ms)
apps/web test: ‚úî buildRequestSafely omits metrics when list is empty (0.128542ms)
apps/web test: ‚úî buildRequestSafely surfaces strategy validation errors (0.417083ms)
apps/web test: ‚úî buildRequestSafely handles optional seed and numeric coercion (0.111042ms)
apps/web test: ‚úî buildRequestSafely surfaces errors for missing run name (0.080416ms)
apps/web test: ‚úî buildRequestSafely requires non-empty symbol (0.100708ms)
apps/web test: ‚úî buildRequestSafely validates timeframe values (0.074291ms)
apps/web test: ‚úî buildRequestSafely validates date format and ordering (0.0815ms)
apps/web test: ‚úî buildRequestSafely rejects negative or invalid numeric fields (0.090541ms)
apps/web test: ‚úî buildRequestSafely applies dataset override when present (0.115625ms)
apps/web test: ‚úî buildRequestSafely validates dataset override contents (0.087541ms)
apps/web test: (node:54133) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:54133) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî mapZodIssues maps field errors to a lookup object (0.827416ms)
apps/web test: ‚úî StrategyControls renders inputs with expected defaults (50.905458ms)
apps/web test: ‚úî StrategyControls surfaces field errors next to the input (2.968208ms)
apps/web test: ‚Ñπ tests 24
apps/web test: ‚Ñπ suites 0
apps/web test: ‚Ñπ pass 24
apps/web test: ‚Ñπ fail 0
apps/web test: ‚Ñπ cancelled 0
apps/web test: ‚Ñπ skipped 0
apps/web test: ‚Ñπ todo 0
apps/web test: ‚Ñπ duration_ms 2950.587041
apps/web test: Done
packages/engine test$ tsc -p tsconfig.test.json && node --test dist-test/test/engine.test.js dist-test/test/engine-integration.test.js
packages/engine test: ‚úî runBacktest fails when data source file is missing (4.97375ms)
packages/engine test: ‚úî runBacktest fails with empty data array (0.655541ms)
packages/engine test: ‚úî runBacktest fails with unknown strategy (4.045041ms)
packages/engine test: ‚úî runBacktest validates strategy parameters (1.828209ms)
packages/engine test: ‚úî runBacktest generates deterministic results with same seed (48.435792ms)
packages/engine test: ‚úî runBacktest handles zero initial cash (1.217875ms)
packages/engine test: ‚úî runBacktest handles negative costs (0.956292ms)
packages/engine test: ‚úî runBacktest creates all required artifacts (22.143541ms)
packages/engine test: ‚úî runBacktest enforces risk limits - kill switch on drawdown (23.417166ms)
packages/engine test: ‚úî runBacktest handles invalid date ranges (0.604042ms)
packages/engine test: ‚úî runBacktest validates all metric keys are recognized (18.608583ms)
packages/engine test: ‚úî runBacktest executes SMA crossover strategy successfully (34.782666ms)
packages/engine test: ‚Ñπ tests 12
packages/engine test: ‚Ñπ suites 0
packages/engine test: ‚Ñπ pass 12
packages/engine test: ‚Ñπ fail 0
packages/engine test: ‚Ñπ cancelled 0
packages/engine test: ‚Ñπ skipped 0
packages/engine test: ‚Ñπ todo 0
packages/engine test: ‚Ñπ duration_ms 309.188833
packages/engine test: Done
services/api test$ pnpm run build && node --loader ts-node/esm --test src/db/index.test.ts test/queue.test.ts && node test/runs.e2e.test.js
services/api test: > @crucible-trader/api@0.0.1 build /Users/gong/Programming/Projects/crucible-trader/services/api
services/api test: > tsc -p .
services/api test: (node:54435) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:54435) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî insertRun persists metadata and listRuns returns it (51.7145ms)
services/api test: ‚úî saveRunResult stores summary and artifacts for later retrieval (2.95725ms)
services/api test: ‚úî reset clears runs and artifacts tables (1.890917ms)
services/api test: ‚úî upsertDataset persists metadata (1.529084ms)
services/api test: ‚úî risk profiles can be stored and retrieved (1.891625ms)
services/api test: (node:54436) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:54436) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî JobQueue can be instantiated with database (3.306375ms)
services/api test: ‚úî JobQueue accepts custom poll interval (0.907875ms)
services/api test: ‚úî JobQueue.onJob registers handler and starts polling (202.98825ms)
services/api test: ‚úî JobQueue processes queued jobs (223.522084ms)
services/api test: ‚úî JobQueue.stop stops polling (276.483583ms)
services/api test: ‚úî JobQueue updates job status to processing (76.715209ms)
services/api test: ‚úî JobQueue handles handler errors gracefully (103.896083ms)
services/api test: ‚úî JobQueue handles invalid JSON in requestJson (102.517958ms)
services/api test: ‚úî JobQueue supports multiple handlers (102.206084ms)
services/api test: ‚úî JobQueue.enqueue triggers immediate poll (1.62675ms)
services/api test: ‚úî JobQueue does not process same job twice (202.759084ms)
services/api test: ‚úî JobQueue ignores jobs with status other than queued (152.235333ms)
services/api test: ‚úî JobQueue processes jobs in order (325.546083ms)
services/api test: ‚Ñπ tests 18
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 18
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 2771.757292
services/api test: ‚úî POST /api/runs executes a backtest end-to-end (64.415333ms)
services/api test: ‚Ñπ tests 1
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 1
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 67.10425
services/api test: Done
services/backtest-worker test$ CRUCIBLE_WORKER_AUTOSTART=false node --loader ts-node/esm --test test/backtest-worker.test.ts
services/backtest-worker test: (node:54514) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/backtest-worker test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/backtest-worker test: (Use `node --trace-warnings ...` to show where the warning was created)
services/backtest-worker test: (node:54514) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/backtest-worker test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/backtest-worker test: [dotenv@17.2.3] injecting env (2) from ../../.env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
services/backtest-worker test: [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
services/backtest-worker test: ‚úî createManifestWriter writes manifest with defaults and dataset metadata (5.966458ms)
services/backtest-worker test: ‚úî createManifestWriter keeps explicit report path and metadata (1.960209ms)
services/backtest-worker test: ‚úî createJobHandler processes job successfully and persists result (0.546083ms)
services/backtest-worker test: ‚úî createJobHandler skips risk profile lookup when not provided (0.154167ms)
services/backtest-worker test: ‚úî createJobHandler marks runs as failed when runBacktest throws (0.381416ms)
services/backtest-worker test: ‚Ñπ tests 5
services/backtest-worker test: ‚Ñπ suites 0
services/backtest-worker test: ‚Ñπ pass 5
services/backtest-worker test: ‚Ñπ fail 0
services/backtest-worker test: ‚Ñπ cancelled 0
services/backtest-worker test: ‚Ñπ skipped 0
services/backtest-worker test: ‚Ñπ todo 0
services/backtest-worker test: ‚Ñπ duration_ms 763.899917
services/backtest-worker test: Done
