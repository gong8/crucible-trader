Scope: 11 of 12 workspace projects
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/logger test: (node:94620) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:94620) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: (node:94619) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:94619) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/metrics test: (node:94622) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:94622) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: (node:94621) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:94621) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: ✔ createReportManifest returns a report manifest with title (0.542875ms)
packages/report test: ✔ createReportManifest returns expected placeholder title (0.070333ms)
packages/report test: ✔ createReportManifest returns readonly structure (0.061334ms)
packages/report test: ✔ createReportManifest returns new object on each call (0.463166ms)
packages/report test: ✔ report manifest has correct interface structure (0.079625ms)
packages/report test: ✔ report manifest title is non-empty (0.049667ms)
packages/report test: ✔ report manifest title contains expected keywords (0.070625ms)
packages/report test: ℹ tests 7
packages/report test: ℹ suites 0
packages/report test: ℹ pass 7
packages/report test: ℹ fail 0
packages/report test: ℹ cancelled 0
packages/report test: ℹ skipped 0
packages/report test: ℹ todo 0
packages/report test: ℹ duration_ms 702.921125
packages/risk test: ✔ createDefaultRiskLimits returns expected default values (0.605125ms)
packages/risk test: ✔ createDefaultRiskLimits returns readonly object structure (0.103459ms)
packages/risk test: ✔ createDefaultRiskLimits returns new object on each call (0.459125ms)
packages/risk test: ✔ default risk limits are positive numbers (0.06825ms)
packages/risk test: ✔ default risk limits are within reasonable ranges (0.077917ms)
packages/risk test: ✔ default risk limits have expected property types (0.074875ms)
packages/risk test: ✔ maxDailyLossPct default allows for reasonable drawdown (0.052667ms)
packages/risk test: ✔ maxPositionPct default prevents over-concentration (0.049167ms)
packages/risk test: ✔ orderCap default provides reasonable trade sizing (0.056375ms)
packages/risk test: ✔ killSwitchDrawdownPct default protects against catastrophic losses (0.09175ms)
packages/risk test: ✔ cooldownMinutes default allows for recovery period (0.06075ms)
packages/risk test: ✔ risk limits are consistent with each other (0.047833ms)
packages/report test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/risk test: ℹ tests 12
packages/risk test: ℹ suites 0
packages/risk test: ℹ pass 12
packages/risk test: ℹ fail 0
packages/risk test: ℹ cancelled 0
packages/risk test: ℹ skipped 0
packages/risk test: ℹ todo 0
packages/risk test: ℹ duration_ms 727.083334
packages/logger test: ✔ createLogger returns a logger with the correct module name (0.675542ms)
packages/logger test: ✔ logger.log writes JSON formatted output to stdout (1.775625ms)
packages/logger test: ✔ logger.debug calls log with debug level (0.426917ms)
packages/logger test: ✔ logger.info calls log with info level (0.265625ms)
packages/logger test: ✔ logger.warn calls log with warn level (0.189875ms)
packages/logger test: ✔ logger.error writes to stderr and uses error level (0.203375ms)
packages/logger test: ✔ logger includes runId in output when provided (0.176917ms)
packages/logger test: ✔ logger excludes runId when not a string (0.154542ms)
packages/logger test: ✔ logger handles empty metadata (0.89525ms)
packages/logger test: ✔ logger handles complex metadata (0.692958ms)
packages/logger test: ✔ logger timestamp is in ISO format (0.213166ms)
packages/logger test: ✔ multiple loggers with different modules don't interfere (0.138625ms)
packages/risk test: Done
packages/metrics test: ✔ calculateReturns computes sequential percentage returns (1.336708ms)
packages/metrics test: ✔ calculateReturns returns empty array for empty input (0.0645ms)
packages/metrics test: ✔ calculateReturns returns empty array for single point (0.064667ms)
packages/metrics test: ✔ calculateReturns handles equity of zero gracefully (0.057875ms)
packages/metrics test: ✔ calculateReturns handles negative equity (0.052166ms)
packages/metrics test: ✔ calculateReturns computes returns for all positive equity (0.061291ms)
packages/metrics test: ✔ calculateReturns handles flat equity curve (0.068708ms)
packages/metrics test: ✔ calculateSharpe returns zero when variance is zero (0.140875ms)
packages/metrics test: ✔ calculateSharpe returns zero for empty points (0.055083ms)
packages/metrics test: ✔ calculateSharpe returns zero for single point (0.08675ms)
packages/metrics test: ✔ calculateSharpe computes value for increasing equity (0.078416ms)
packages/metrics test: ✔ calculateSharpe handles flat equity curve (0.0515ms)
packages/metrics test: ✔ calculateSharpe with custom risk-free rate (0.040666ms)
packages/metrics test: ✔ calculateSharpe handles volatile equity curve (0.040917ms)
packages/metrics test: ✔ calculateSortino accounts for downside deviation (0.071792ms)
packages/metrics test: ✔ calculateSortino returns zero for empty points (0.048625ms)
packages/metrics test: ✔ calculateSortino returns zero when no downside (0.042708ms)
packages/metrics test: ✔ calculateSortino handles all negative returns (0.038666ms)
packages/metrics test: ✔ calculateSortino with custom risk-free rate (0.04025ms)
packages/metrics test: ✔ calculateSortino handles mixed positive and negative returns (0.0365ms)
packages/metrics test: ✔ calculateMaxDrawdown identifies largest drop (0.062292ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for empty points (0.032417ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for single point (0.036875ms)
packages/metrics test: ✔ calculateMaxDrawdown returns zero for always increasing equity (0.035334ms)
packages/metrics test: ✔ calculateMaxDrawdown handles severe drawdown (0.038875ms)
packages/metrics test: ✔ calculateMaxDrawdown handles multiple drawdowns (0.04225ms)
packages/metrics test: ✔ calculateMaxDrawdown handles equity going to zero (0.036792ms)
packages/metrics test: ✔ calculateCagr handles chronological data (0.062375ms)
packages/metrics test: ✔ calculateCagr returns zero for empty points (0.038667ms)
packages/metrics test: ✔ calculateCagr returns zero for single point (0.032667ms)
packages/metrics test: ✔ calculateCagr computes positive value for growth (0.056334ms)
packages/metrics test: ✔ calculateCagr computes negative value for loss (0.043875ms)
packages/metrics test: ✔ calculateCagr handles zero starting equity (0.032666ms)
packages/metrics test: ✔ calculateCagr handles negative equity (0.046375ms)
packages/metrics test: ✔ calculateCagr handles invalid timestamps (0.036417ms)
packages/metrics test: ✔ calculateCagr handles same start and end time (0.039042ms)
packages/metrics test: ✔ calculateCagr handles multi-year period (0.035833ms)
packages/metrics test: ✔ calculateMetricsSummary aggregates metrics (0.092125ms)
packages/metrics test: ✔ calculateMetricsSummary returns zeros for empty points (0.041375ms)
packages/metrics test: ✔ calculateMetricsSummary computes totalPnl correctly (0.048708ms)
packages/metrics test: ✔ calculateMetricsSummary computes totalReturn correctly (0.044875ms)
packages/metrics test: ✔ calculateMetricsSummary handles negative returns (0.047042ms)
packages/metrics test: ✔ calculateMetricsSummary handles zero starting equity (0.039334ms)
packages/metrics test: ✔ calculateMetricsSummary all metrics are finite (0.060167ms)
packages/metrics test: ✔ calculateMetricsSummary handles large equity values (0.047125ms)
packages/logger test: ℹ tests 12
packages/logger test: ℹ suites 0
packages/logger test: ℹ pass 12
packages/logger test: ℹ fail 0
packages/logger test: ℹ cancelled 0
packages/logger test: ℹ skipped 0
packages/logger test: ℹ todo 0
packages/logger test: ℹ duration_ms 747.545708
packages/logger test: Done
packages/metrics test: ℹ tests 45
packages/metrics test: ℹ suites 0
packages/metrics test: ℹ pass 45
packages/metrics test: ℹ fail 0
packages/metrics test: ℹ cancelled 0
packages/metrics test: ℹ skipped 0
packages/metrics test: ℹ todo 0
packages/metrics test: ℹ duration_ms 748.883041
packages/metrics test: Done
packages/sdk test: (node:94652) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:94652) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ DataRequestSchema validates valid request (1.339167ms)
packages/sdk test: ✔ DataRequestSchema rejects invalid source (0.410208ms)
packages/sdk test: ✔ DataRequestSchema rejects empty symbol (0.127375ms)
packages/sdk test: ✔ DataRequestSchema rejects invalid timeframe (0.095958ms)
packages/sdk test: ✔ DataRequestSchema accepts all valid sources (0.157458ms)
packages/sdk test: ✔ DataRequestSchema accepts all valid timeframes (0.118417ms)
packages/sdk test: ✔ DataRequestSchema makes adjusted optional (0.068833ms)
packages/sdk test: ✔ DataRequestSchema rejects non-boolean adjusted (0.079292ms)
packages/sdk test: ✔ BacktestRequestSchema validates valid request (0.387541ms)
packages/sdk test: ✔ BacktestRequestSchema rejects empty runName (0.160875ms)
packages/sdk test: ✔ BacktestRequestSchema rejects empty data array (0.091083ms)
packages/sdk test: ✔ BacktestRequestSchema rejects negative fees (0.11275ms)
packages/sdk test: ✔ BacktestRequestSchema rejects non-positive initialCash (0.088458ms)
packages/sdk test: ✔ BacktestRequestSchema accepts optional seed (0.112625ms)
packages/sdk test: ✔ BacktestRequestSchema rejects non-integer seed (0.104458ms)
packages/sdk test: ✔ BacktestRequestSchema accepts valid metrics array (0.562875ms)
packages/sdk test: ✔ BacktestRequestSchema rejects invalid metrics (0.178166ms)
packages/sdk test: ✔ BacktestResultSchema validates valid result (0.117667ms)
packages/sdk test: ✔ BacktestResultSchema rejects empty runId (0.067333ms)
packages/sdk test: ✔ BacktestResultSchema makes reportMd optional (0.045875ms)
packages/sdk test: ✔ RiskProfileSchema validates valid profile (0.052334ms)
packages/sdk test: ✔ RiskProfileSchema rejects negative percentages (0.049416ms)
packages/sdk test: ✔ RiskProfileSchema rejects negative cooldown (0.044333ms)
packages/sdk test: ✔ RiskProfileSchema rejects non-integer cooldown (0.048625ms)
packages/sdk test: ✔ assertValid returns parsed data for valid input (0.507791ms)
packages/sdk test: ✔ assertValid throws Error for invalid input (0.331542ms)
packages/sdk test: ✔ assertValid error message includes field path (0.08375ms)
packages/sdk test: ✔ assertValid uses default label when not provided (0.115667ms)
packages/sdk test: (node:94653) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:94653) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ sma crossover emits buy and sell signals on crossovers (2.20775ms)
packages/sdk test: ✔ momentum strategy reacts to sustained moves (0.230708ms)
packages/sdk test: ✔ mean reversion strategy triggers on z-score extremes (0.223458ms)
packages/sdk test: ✔ breakout strategy emits signals on range breaks (0.258875ms)
packages/sdk test: (node:94654) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:94654) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ✔ all strategy defaults satisfy their schemas (1.160667ms)
packages/sdk test: ✔ invalid SMA crossover params throw schema errors (0.190458ms)
packages/sdk test: ℹ tests 34
packages/sdk test: ℹ suites 0
packages/sdk test: ℹ pass 34
packages/sdk test: ℹ fail 0
packages/sdk test: ℹ cancelled 0
packages/sdk test: ℹ skipped 0
packages/sdk test: ℹ todo 0
packages/sdk test: ℹ duration_ms 888.6445
packages/sdk test: Done
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/date-range.test.ts test/strategy-controls.test.tsx
packages/stats test$ node --loader ts-node/esm --test test/**/*.test.ts
packages/stats test: (node:94714) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:94714) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: (node:94715) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:94715) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: (node:94716) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:94716) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: ✔ runBootstrap returns valid structure (3.271916ms)
packages/stats test: ✔ runBootstrap is reproducible with same seed (1.053542ms)
packages/stats test: ✔ runBootstrap handles sharpe ratio (0.303792ms)
packages/stats test: ✔ runBootstrap handles sortino ratio (0.283166ms)
packages/stats test: ✔ runBootstrap handles total return (0.173917ms)
packages/stats test: ✔ runBootstrap handles max drawdown (0.235791ms)
packages/stats test: ✔ runBootstrap confidence interval contains point estimate with high probability (13.454958ms)
packages/stats test: ✔ runBootstrap wider confidence level produces wider intervals (1.475083ms)
packages/stats test: ✔ runBootstrap handles std_dev metric (0.231709ms)
packages/stats test: ✔ runBootstrap throws on empty equity (0.353209ms)
packages/stats test: ✔ interpretBootstrap produces readable output (0.10275ms)
packages/stats test: ✔ interpretBootstrap handles different metrics (0.057167ms)
packages/stats test: (node:94718) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:94718) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: ✔ runPermutationTest returns valid structure (2.202875ms)
packages/stats test: ✔ runPermutationTest is reproducible with same seed (0.798375ms)
packages/stats test: ✔ runPermutationTest handles profitable strategy (0.377209ms)
packages/stats test: ✔ runPermutationTest handles losing strategy (0.26375ms)
packages/stats test: ✔ runPermutationTest handles max drawdown metric (0.229292ms)
packages/stats test: ✔ runPermutationTest handles mixed wins and losses (0.388791ms)
packages/stats test: ✔ interpretPermutationTest produces readable output for significant result (0.108917ms)
packages/stats test: ✔ interpretPermutationTest produces readable output for non-significant result (1.464584ms)
packages/stats test: ✔ runPermutationTest defaults alpha to 0.05 when not provided (0.132125ms)
packages/stats test: ℹ tests 21
packages/stats test: ℹ suites 0
packages/stats test: ℹ pass 21
packages/stats test: ℹ fail 0
packages/stats test: ℹ cancelled 0
packages/stats test: ℹ skipped 0
packages/stats test: ℹ todo 0
packages/stats test: ℹ duration_ms 1719.485542
packages/stats test: Done
packages/data test: ▶ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ✔ Cache invalidates after dataset change (5.428209ms)
packages/data test: ✔ CsvSource loads, dedupes, sorts, and caches bars (17.199542ms)
packages/data test: (node:94719) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:94719) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ CsvSource throws descriptive error when file doesn't exist (6.909291ms)
packages/data test: ✔ CsvSource handles malformed CSV gracefully (7.793375ms)
packages/data test: ✔ CsvSource handles empty CSV file (5.13225ms)
packages/data test: ✔ CsvSource handles CSV with only headers (12.460667ms)
packages/data test: ✔ CsvSource handles missing required columns (4.749583ms)
packages/data test: ✔ TiingoSource throws error when API key is missing (0.580625ms)
packages/data test: ✔ TiingoSource requires start and end dates (0.12ms)
packages/data test: ✔ TiingoSource handles HTTP errors gracefully (3.090667ms)
packages/data test: ✔ TiingoSource handles malformed JSON response (1.694916ms)
packages/data test: ✔ TiingoSource handles empty response array (4.180125ms)
packages/data test: ✔ TiingoSource handles non-array response (1.542166ms)
packages/data test: ✔ PolygonSource throws error when API key is missing (0.544125ms)
packages/data test: ✔ PolygonSource requires start and end dates (0.129334ms)
packages/data test: ✔ PolygonSource handles HTTP errors (1.03975ms)
packages/data test: ✔ PolygonSource handles missing results in response (1.152792ms)
packages/data test: ✔ PolygonSource filters out bars with missing data (1.03325ms)
packages/data test: ✔ PolygonSource handles invalid timestamp formats (0.752167ms)
packages/data test: (node:94721) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:94721) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ slugify converts uppercase to lowercase (0.857167ms)
packages/data test: ✔ slugify replaces spaces with underscores (0.084375ms)
packages/data test: ✔ slugify replaces special characters with underscores (0.068125ms)
packages/data test: ✔ slugify removes leading and trailing underscores (0.437792ms)
packages/data test: ✔ slugify collapses consecutive special characters (0.209542ms)
packages/data test: ✔ slugify handles empty string (0.122667ms)
packages/data test: ✔ slugify handles numeric strings (0.141792ms)
packages/data test: ✔ slugify handles mixed alphanumeric (0.15075ms)
packages/data test: ✔ slugify handles unicode characters (0.150167ms)
packages/data test: ✔ sanitizeBar returns valid bar unchanged (1.796917ms)
packages/data test: ✔ sanitizeBar returns null for null input (0.080625ms)
packages/data test: ✔ sanitizeBar returns null for undefined input (0.045792ms)
packages/data test: ✔ sanitizeBar returns null when timestamp is missing (0.0625ms)
packages/data test: ✔ sanitizeBar returns null when timestamp is not a string (0.043542ms)
packages/data test: ✔ sanitizeBar returns null when open is missing (0.072708ms)
packages/data test: ✔ sanitizeBar returns null when open is not a number (0.037334ms)
packages/data test: ✔ sanitizeBar returns null when high is missing (0.035667ms)
packages/data test: ✔ sanitizeBar returns null when low is missing (0.033792ms)
packages/data test: ✔ sanitizeBar returns null when close is missing (0.032625ms)
packages/data test: ✔ sanitizeBar returns null when volume is missing (0.034667ms)
packages/data test: ✔ sanitizeBar accepts bar with zero volume (0.053458ms)
packages/data test: ✔ sanitizeBar accepts bar with negative prices (edge case) (0.040875ms)
packages/data test: ✔ sanitizeBar filters out extra properties (0.085042ms)
packages/data test: ✔ filterBarsForRequest includes bars within range (0.103542ms)
packages/data test: ✔ filterBarsForRequest excludes bars before start (0.0525ms)
packages/data test: ✔ filterBarsForRequest excludes bars after end (0.051125ms)
packages/data test: ✔ filterBarsForRequest includes bars at exact boundaries (0.044792ms)
packages/data test: ✔ filterBarsForRequest returns empty array when no bars match (0.038834ms)
packages/data test: ✔ filterBarsForRequest excludes bars with invalid timestamps (0.0385ms)
packages/data test: ✔ filterBarsForRequest handles empty bar array (0.041792ms)
packages/data test: ✔ filterBarsForRequest handles missing start date (0.036459ms)
packages/data test: ✔ filterBarsForRequest handles missing end date (0.044917ms)
packages/data test: ✔ sortBarsChronologically sorts bars in ascending order (0.062625ms)
packages/data test: ✔ sortBarsChronologically handles already sorted bars (0.075208ms)
packages/data test: ✔ sortBarsChronologically handles empty array (0.054958ms)
packages/data test: ✔ sortBarsChronologically handles single bar (0.053333ms)
packages/data test: ✔ sortBarsChronologically handles bars with same timestamp (0.042292ms)
packages/data test: ✔ sortBarsChronologically returns a new array (0.056667ms)
packages/data test: ✔ sortBarsChronologically does not mutate original array (0.058333ms)
packages/data test: ✔ sortBarsChronologically handles bars with invalid timestamps (0.045ms)
packages/data test: ✔ sortBarsChronologically handles intraday timestamps correctly (0.047916ms)
packages/data test: (node:94723) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:94723) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ PolygonSource fetches, caches, and filters aggregates (13.618875ms)
packages/data test: (node:94724) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:94724) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ✔ TiingoSource fetches, caches, and filters bars (13.683ms)
packages/data test: ✔ TiingoSource clamps future end dates before requesting data (4.226583ms)
packages/data test: ✔ TiingoSource skips HTTP requests when entire range is in the future (0.500333ms)
packages/data test: ✔ TiingoSource retries with an earlier end date after Tiingo rejects the range (2.042916ms)
packages/data test: ✔ TiingoSource splits long requests into multiple chunks (2.996125ms)
packages/data test: ✔ TiingoSource retries after rate limit by waiting before reissuing the same chunk (2.215ms)
packages/data test: ℹ tests 67
packages/data test: ℹ suites 0
packages/data test: ℹ pass 67
packages/data test: ℹ fail 0
packages/data test: ℹ cancelled 0
packages/data test: ℹ skipped 0
packages/data test: ℹ todo 0
packages/data test: ℹ duration_ms 1935.040708
packages/data test: Done
apps/web test: ✔ apiRoute normalizes paths and uses default base (44.623875ms)
apps/web test: ✔ apiRoute respects NEXT_PUBLIC_API_BASE_URL override (2.473416ms)
apps/web test: (node:94717) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:94717) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ✔ computeAvailableRange picks tiingo range when available (0.661625ms)
apps/web test: ✔ computeAvailableRange aggregates auto range from remote sources (0.566291ms)
apps/web test: ✔ computeAvailableRange falls back to csv coverage when remote missing (0.084916ms)
apps/web test: ✔ computeAvailableRange returns null when no dataset exists (0.059667ms)
apps/web test: (node:94720) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:94720) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: node:internal/modules/run_main:107
apps/web test:     triggerUncaughtException(
apps/web test:     ^
apps/web test: [Object: null prototype] {
apps/web test:   Symbol(nodejs.util.inspect.custom): [Function: [nodejs.util.inspect.custom]]
apps/web test: }
apps/web test: Node.js v24.10.0
apps/web test: ✖ test/new-run-helpers.test.ts (2181.737958ms)
apps/web test: (node:94722) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:94722) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ✔ mapZodIssues maps field errors to a lookup object (0.868834ms)
apps/web test: ✔ StrategyControls renders inputs with expected defaults (55.4565ms)
apps/web test: ✔ StrategyControls surfaces field errors next to the input (3.39675ms)
apps/web test: ℹ tests 10
apps/web test: ℹ suites 0
apps/web test: ℹ pass 9
apps/web test: ℹ fail 1
apps/web test: ℹ cancelled 0
apps/web test: ℹ skipped 0
apps/web test: ℹ todo 0
apps/web test: ℹ duration_ms 3113.853167
apps/web test: ✖ failing tests:
apps/web test: test at test/new-run-helpers.test.ts:1:1
apps/web test: ✖ test/new-run-helpers.test.ts (2181.737958ms)
apps/web test:   'test failed'
apps/web test: Failed
/Users/gong/Programming/Projects/crucible-trader/apps/web:
 ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  @crucible-trader/web@0.0.1 test: `TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/date-range.test.ts test/strategy-controls.test.tsx`
Exit status 1
