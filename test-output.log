Scope: 10 of 11 workspace projects
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/report test: (node:66851) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:66851) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: (node:66853) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:66853) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/metrics test: (node:66854) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:66854) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/logger test: (node:66852) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:66852) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: ‚úî createReportManifest returns a report manifest with title (0.533416ms)
packages/report test: ‚úî createReportManifest returns expected placeholder title (0.066417ms)
packages/report test: ‚úî createReportManifest returns readonly structure (0.06ms)
packages/report test: ‚úî createReportManifest returns new object on each call (0.533292ms)
packages/report test: ‚úî report manifest has correct interface structure (0.113458ms)
packages/report test: ‚úî report manifest title is non-empty (0.061042ms)
packages/report test: ‚úî report manifest title contains expected keywords (0.082166ms)
packages/report test: ‚Ñπ tests 7
packages/report test: ‚Ñπ suites 0
packages/report test: ‚Ñπ pass 7
packages/report test: ‚Ñπ fail 0
packages/report test: ‚Ñπ cancelled 0
packages/report test: ‚Ñπ skipped 0
packages/report test: ‚Ñπ todo 0
packages/report test: ‚Ñπ duration_ms 596.260167
packages/report test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/risk test: ‚úî createDefaultRiskLimits returns expected default values (0.606833ms)
packages/risk test: ‚úî createDefaultRiskLimits returns readonly object structure (0.10325ms)
packages/risk test: ‚úî createDefaultRiskLimits returns new object on each call (0.466834ms)
packages/risk test: ‚úî default risk limits are positive numbers (0.142833ms)
packages/risk test: ‚úî default risk limits are within reasonable ranges (0.076625ms)
packages/risk test: ‚úî default risk limits have expected property types (0.092792ms)
packages/risk test: ‚úî maxDailyLossPct default allows for reasonable drawdown (0.055375ms)
packages/risk test: ‚úî maxPositionPct default prevents over-concentration (0.047875ms)
packages/risk test: ‚úî orderCap default provides reasonable trade sizing (0.06375ms)
packages/risk test: ‚úî killSwitchDrawdownPct default protects against catastrophic losses (0.094542ms)
packages/risk test: ‚úî cooldownMinutes default allows for recovery period (0.054292ms)
packages/risk test: ‚úî risk limits are consistent with each other (0.054583ms)
packages/risk test: ‚Ñπ tests 12
packages/risk test: ‚Ñπ suites 0
packages/risk test: ‚Ñπ pass 12
packages/risk test: ‚Ñπ fail 0
packages/risk test: ‚Ñπ cancelled 0
packages/risk test: ‚Ñπ skipped 0
packages/risk test: ‚Ñπ todo 0
packages/risk test: ‚Ñπ duration_ms 645.762917
packages/risk test: Done
packages/metrics test: ‚úî calculateReturns computes sequential percentage returns (1.40475ms)
packages/metrics test: ‚úî calculateReturns returns empty array for empty input (0.077083ms)
packages/metrics test: ‚úî calculateReturns returns empty array for single point (0.066875ms)
packages/metrics test: ‚úî calculateReturns handles equity of zero gracefully (0.063542ms)
packages/metrics test: ‚úî calculateReturns handles negative equity (0.060417ms)
packages/metrics test: ‚úî calculateReturns computes returns for all positive equity (0.062041ms)
packages/metrics test: ‚úî calculateReturns handles flat equity curve (0.068875ms)
packages/metrics test: ‚úî calculateSharpe returns zero when variance is zero (0.1485ms)
packages/metrics test: ‚úî calculateSharpe returns zero for empty points (0.060458ms)
packages/metrics test: ‚úî calculateSharpe returns zero for single point (0.088125ms)
packages/metrics test: ‚úî calculateSharpe computes value for increasing equity (0.073334ms)
packages/metrics test: ‚úî calculateSharpe handles flat equity curve (0.059958ms)
packages/metrics test: ‚úî calculateSharpe with custom risk-free rate (0.040667ms)
packages/metrics test: ‚úî calculateSharpe handles volatile equity curve (0.042667ms)
packages/metrics test: ‚úî calculateSortino accounts for downside deviation (0.072167ms)
packages/metrics test: ‚úî calculateSortino returns zero for empty points (0.030583ms)
packages/metrics test: ‚úî calculateSortino returns zero when no downside (0.033167ms)
packages/metrics test: ‚úî calculateSortino handles all negative returns (0.054875ms)
packages/metrics test: ‚úî calculateSortino with custom risk-free rate (0.046792ms)
packages/metrics test: ‚úî calculateSortino handles mixed positive and negative returns (0.038792ms)
packages/metrics test: ‚úî calculateMaxDrawdown identifies largest drop (0.063ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for empty points (0.032666ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for single point (0.043542ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for always increasing equity (0.035083ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles severe drawdown (0.039625ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles multiple drawdowns (0.042416ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles equity going to zero (0.034834ms)
packages/metrics test: ‚úî calculateCagr handles chronological data (0.063084ms)
packages/metrics test: ‚úî calculateCagr returns zero for empty points (0.041041ms)
packages/metrics test: ‚úî calculateCagr returns zero for single point (0.032209ms)
packages/metrics test: ‚úî calculateCagr computes positive value for growth (0.055916ms)
packages/metrics test: ‚úî calculateCagr computes negative value for loss (0.035625ms)
packages/metrics test: ‚úî calculateCagr handles zero starting equity (0.031958ms)
packages/metrics test: ‚úî calculateCagr handles negative equity (0.039958ms)
packages/metrics test: ‚úî calculateCagr handles invalid timestamps (0.036ms)
packages/metrics test: ‚úî calculateCagr handles same start and end time (0.039209ms)
packages/metrics test: ‚úî calculateCagr handles multi-year period (0.035417ms)
packages/metrics test: ‚úî calculateMetricsSummary aggregates metrics (0.083208ms)
packages/metrics test: ‚úî calculateMetricsSummary returns zeros for empty points (0.040292ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalPnl correctly (0.042292ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalReturn correctly (0.044791ms)
packages/metrics test: ‚úî calculateMetricsSummary handles negative returns (0.046292ms)
packages/metrics test: ‚úî calculateMetricsSummary handles zero starting equity (0.110916ms)
packages/metrics test: ‚úî calculateMetricsSummary all metrics are finite (0.070834ms)
packages/metrics test: ‚úî calculateMetricsSummary handles large equity values (0.047084ms)
packages/metrics test: ‚Ñπ tests 45
packages/metrics test: ‚Ñπ suites 0
packages/metrics test: ‚Ñπ pass 45
packages/metrics test: ‚Ñπ fail 0
packages/metrics test: ‚Ñπ cancelled 0
packages/metrics test: ‚Ñπ skipped 0
packages/metrics test: ‚Ñπ todo 0
packages/metrics test: ‚Ñπ duration_ms 688.285666
packages/metrics test: Done
packages/logger test: ‚úî createLogger returns a logger with the correct module name (0.592917ms)
packages/logger test: ‚úî logger.log writes JSON formatted output to stdout (1.624792ms)
packages/logger test: ‚úî logger.debug calls log with debug level (0.249959ms)
packages/logger test: ‚úî logger.info calls log with info level (0.262208ms)
packages/logger test: ‚úî logger.warn calls log with warn level (0.201875ms)
packages/logger test: ‚úî logger.error writes to stderr and uses error level (0.2075ms)
packages/logger test: ‚úî logger includes runId in output when provided (0.185167ms)
packages/logger test: ‚úî logger excludes runId when not a string (0.15625ms)
packages/logger test: ‚úî logger handles empty metadata (0.937417ms)
packages/logger test: ‚úî logger handles complex metadata (0.670666ms)
packages/logger test: ‚úî logger timestamp is in ISO format (0.185958ms)
packages/logger test: ‚úî multiple loggers with different modules don't interfere (0.133875ms)
packages/logger test: ‚Ñπ tests 12
packages/logger test: ‚Ñπ suites 0
packages/logger test: ‚Ñπ pass 12
packages/logger test: ‚Ñπ fail 0
packages/logger test: ‚Ñπ cancelled 0
packages/logger test: ‚Ñπ skipped 0
packages/logger test: ‚Ñπ todo 0
packages/logger test: ‚Ñπ duration_ms 733.561667
packages/logger test: Done
packages/sdk test: (node:66884) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:66884) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî DataRequestSchema validates valid request (1.340458ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid source (0.400625ms)
packages/sdk test: ‚úî DataRequestSchema rejects empty symbol (0.124333ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid timeframe (0.10125ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid sources (0.18525ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid timeframes (0.182583ms)
packages/sdk test: ‚úî DataRequestSchema makes adjusted optional (0.077ms)
packages/sdk test: ‚úî DataRequestSchema rejects non-boolean adjusted (0.093625ms)
packages/sdk test: ‚úî BacktestRequestSchema validates valid request (0.412917ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty runName (0.163916ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty data array (0.102791ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects negative fees (0.10825ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-positive initialCash (0.103792ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts optional seed (0.115625ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-integer seed (0.103959ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts valid metrics array (0.097875ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects invalid metrics (0.574083ms)
packages/sdk test: ‚úî BacktestResultSchema validates valid result (0.121708ms)
packages/sdk test: ‚úî BacktestResultSchema rejects empty runId (0.070417ms)
packages/sdk test: ‚úî BacktestResultSchema makes reportMd optional (0.051459ms)
packages/sdk test: ‚úî RiskProfileSchema validates valid profile (0.056125ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative percentages (0.050458ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative cooldown (0.054792ms)
packages/sdk test: ‚úî RiskProfileSchema rejects non-integer cooldown (0.055583ms)
packages/sdk test: ‚úî assertValid returns parsed data for valid input (0.484917ms)
packages/sdk test: ‚úî assertValid throws Error for invalid input (0.333625ms)
packages/sdk test: ‚úî assertValid error message includes field path (0.087417ms)
packages/sdk test: ‚úî assertValid uses default label when not provided (0.111833ms)
packages/sdk test: (node:66885) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:66885) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî sma crossover emits buy and sell signals on crossovers (2.164208ms)
packages/sdk test: ‚úî momentum strategy reacts to sustained moves (0.228292ms)
packages/sdk test: ‚úî mean reversion strategy triggers on z-score extremes (0.216959ms)
packages/sdk test: ‚úî breakout strategy emits signals on range breaks (0.259208ms)
packages/sdk test: (node:66886) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:66886) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî all strategy defaults satisfy their schemas (1.185417ms)
packages/sdk test: ‚úî invalid SMA crossover params throw schema errors (0.201792ms)
packages/sdk test: ‚Ñπ tests 34
packages/sdk test: ‚Ñπ suites 0
packages/sdk test: ‚Ñπ pass 34
packages/sdk test: ‚Ñπ fail 0
packages/sdk test: ‚Ñπ cancelled 0
packages/sdk test: ‚Ñπ skipped 0
packages/sdk test: ‚Ñπ todo 0
packages/sdk test: ‚Ñπ duration_ms 838.107833
packages/sdk test: Done
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/strategy-controls.test.tsx
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
apps/web test: (node:66931) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:66931) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: (node:66930) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:66930) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚ñ∂ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ‚úî Cache invalidates after dataset change (3.531083ms)
packages/data test: ‚úî CsvSource loads, dedupes, sorts, and caches bars (15.427917ms)
apps/web test: ‚úî apiRoute normalizes paths and uses default base (28.68375ms)
packages/data test: (node:66933) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:66933) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî apiRoute respects NEXT_PUBLIC_API_BASE_URL override (13.561041ms)
packages/data test: ‚úî CsvSource throws descriptive error when file doesn't exist (7.346833ms)
packages/data test: ‚úî CsvSource handles malformed CSV gracefully (5.064834ms)
packages/data test: ‚úî CsvSource handles empty CSV file (2.693917ms)
packages/data test: ‚úî CsvSource handles CSV with only headers (3.963167ms)
packages/data test: ‚úî CsvSource handles missing required columns (2.599625ms)
packages/data test: ‚úî TiingoSource throws error when API key is missing (0.336583ms)
packages/data test: ‚úî TiingoSource requires start and end dates (0.129917ms)
packages/data test: ‚úî TiingoSource handles HTTP errors gracefully (1.050375ms)
packages/data test: ‚úî TiingoSource handles malformed JSON response (0.576458ms)
packages/data test: ‚úî TiingoSource handles empty response array (1.503916ms)
packages/data test: ‚úî TiingoSource handles non-array response (0.72825ms)
packages/data test: ‚úî PolygonSource throws error when API key is missing (0.261417ms)
packages/data test: ‚úî PolygonSource requires start and end dates (0.086541ms)
packages/data test: ‚úî PolygonSource handles HTTP errors (0.968291ms)
packages/data test: ‚úî PolygonSource handles missing results in response (0.554209ms)
packages/data test: ‚úî PolygonSource filters out bars with missing data (2.249208ms)
packages/data test: ‚úî PolygonSource handles invalid timestamp formats (1.222542ms)
packages/data test: (node:66935) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:66935) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî slugify converts uppercase to lowercase (0.836667ms)
packages/data test: ‚úî slugify replaces spaces with underscores (0.087666ms)
packages/data test: ‚úî slugify replaces special characters with underscores (0.065417ms)
packages/data test: ‚úî slugify removes leading and trailing underscores (0.875667ms)
packages/data test: ‚úî slugify collapses consecutive special characters (0.068167ms)
packages/data test: ‚úî slugify handles empty string (0.046084ms)
packages/data test: ‚úî slugify handles numeric strings (0.052416ms)
packages/data test: ‚úî slugify handles mixed alphanumeric (0.0575ms)
packages/data test: ‚úî slugify handles unicode characters (0.056375ms)
packages/data test: ‚úî sanitizeBar returns valid bar unchanged (0.562084ms)
packages/data test: ‚úî sanitizeBar returns null for null input (0.062166ms)
packages/data test: ‚úî sanitizeBar returns null for undefined input (0.042625ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is missing (0.054291ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is not a string (0.052834ms)
packages/data test: ‚úî sanitizeBar returns null when open is missing (0.046625ms)
packages/data test: ‚úî sanitizeBar returns null when open is not a number (0.044958ms)
packages/data test: ‚úî sanitizeBar returns null when high is missing (0.039209ms)
packages/data test: ‚úî sanitizeBar returns null when low is missing (0.038708ms)
packages/data test: ‚úî sanitizeBar returns null when close is missing (0.037125ms)
packages/data test: ‚úî sanitizeBar returns null when volume is missing (0.037042ms)
packages/data test: ‚úî sanitizeBar accepts bar with zero volume (0.046458ms)
packages/data test: ‚úî sanitizeBar accepts bar with negative prices (edge case) (0.044458ms)
packages/data test: ‚úî sanitizeBar filters out extra properties (0.091917ms)
packages/data test: ‚úî filterBarsForRequest includes bars within range (0.107875ms)
packages/data test: ‚úî filterBarsForRequest excludes bars before start (0.056875ms)
packages/data test: ‚úî filterBarsForRequest excludes bars after end (0.053166ms)
packages/data test: ‚úî filterBarsForRequest includes bars at exact boundaries (0.056208ms)
packages/data test: ‚úî filterBarsForRequest returns empty array when no bars match (0.044667ms)
packages/data test: ‚úî filterBarsForRequest excludes bars with invalid timestamps (0.0445ms)
packages/data test: ‚úî filterBarsForRequest handles empty bar array (0.044667ms)
packages/data test: ‚úî filterBarsForRequest handles missing start date (0.041834ms)
packages/data test: ‚úî filterBarsForRequest handles missing end date (0.04675ms)
packages/data test: ‚úî sortBarsChronologically sorts bars in ascending order (0.066166ms)
packages/data test: ‚úî sortBarsChronologically handles already sorted bars (0.0515ms)
packages/data test: ‚úî sortBarsChronologically handles empty array (0.042459ms)
packages/data test: ‚úî sortBarsChronologically handles single bar (0.051625ms)
packages/data test: ‚úî sortBarsChronologically handles bars with same timestamp (0.045375ms)
packages/data test: ‚úî sortBarsChronologically returns a new array (0.058667ms)
packages/data test: ‚úî sortBarsChronologically does not mutate original array (0.054792ms)
packages/data test: ‚úî sortBarsChronologically handles bars with invalid timestamps (0.043541ms)
packages/data test: ‚úî sortBarsChronologically handles intraday timestamps correctly (0.061042ms)
packages/data test: (node:66936) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:66936) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî PolygonSource fetches, caches, and filters aggregates (8.992375ms)
packages/data test: (node:66937) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:66937) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî TiingoSource fetches, caches, and filters bars (10.74125ms)
packages/data test: ‚Ñπ tests 62
packages/data test: ‚Ñπ suites 0
packages/data test: ‚Ñπ pass 62
packages/data test: ‚Ñπ fail 0
packages/data test: ‚Ñπ cancelled 0
packages/data test: ‚Ñπ skipped 0
packages/data test: ‚Ñπ todo 0
packages/data test: ‚Ñπ duration_ms 1345.054375
packages/data test: Done
apps/web test: (node:66932) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:66932) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî generateRunName slugs strings and lowercases (0.666709ms)
apps/web test: ‚úî buildDatasetOverride returns undefined when flag or dataset missing (0.097583ms)
apps/web test: ‚úî buildDatasetOverride maps dataset fields when provided (1.29525ms)
apps/web test: ‚úî buildDatasetOverride falls back to current date when dataset is missing range (0.130708ms)
apps/web test: ‚úî buildRequestSafely returns a fully typed BacktestRequest (1.099709ms)
apps/web test: ‚úî buildRequestSafely omits metrics when list is empty (0.210791ms)
apps/web test: ‚úî buildRequestSafely surfaces strategy validation errors (0.494666ms)
apps/web test: ‚úî buildRequestSafely handles optional seed and numeric coercion (0.111708ms)
apps/web test: (node:66934) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:66934) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî mapZodIssues maps field errors to a lookup object (0.810833ms)
apps/web test: ‚úî StrategyControls renders inputs with expected defaults (51.052ms)
apps/web test: ‚úî StrategyControls surfaces field errors next to the input (2.699083ms)
apps/web test: ‚Ñπ tests 13
apps/web test: ‚Ñπ suites 0
apps/web test: ‚Ñπ pass 13
apps/web test: ‚Ñπ fail 0
apps/web test: ‚Ñπ cancelled 0
apps/web test: ‚Ñπ skipped 0
apps/web test: ‚Ñπ todo 0
apps/web test: ‚Ñπ duration_ms 2479.286833
apps/web test: Done
packages/engine test$ tsc -p tsconfig.test.json && node --test dist-test/test/engine.test.js dist-test/test/engine-integration.test.js
packages/engine test: ‚úî runBacktest fails when data source file is missing (4.930458ms)
packages/engine test: ‚úî runBacktest fails with empty data array (0.65525ms)
packages/engine test: ‚úî runBacktest fails with unknown strategy (1.5705ms)
packages/engine test: ‚úî runBacktest validates strategy parameters (1.155917ms)
packages/engine test: ‚úî runBacktest generates deterministic results with same seed (48.925292ms)
packages/engine test: ‚úî runBacktest handles zero initial cash (0.264333ms)
packages/engine test: ‚úî runBacktest handles negative costs (0.175875ms)
packages/engine test: ‚úî runBacktest creates all required artifacts (22.811917ms)
packages/engine test: ‚úî runBacktest enforces risk limits - kill switch on drawdown (22.718959ms)
packages/engine test: ‚úî runBacktest handles invalid date ranges (0.751541ms)
packages/engine test: ‚úî runBacktest validates all metric keys are recognized (18.726833ms)
packages/engine test: ‚úî runBacktest executes SMA crossover strategy successfully (34.109167ms)
packages/engine test: ‚Ñπ tests 12
packages/engine test: ‚Ñπ suites 0
packages/engine test: ‚Ñπ pass 12
packages/engine test: ‚Ñπ fail 0
packages/engine test: ‚Ñπ cancelled 0
packages/engine test: ‚Ñπ skipped 0
packages/engine test: ‚Ñπ todo 0
packages/engine test: ‚Ñπ duration_ms 314.709
packages/engine test: Done
services/api test$ pnpm run build && node --loader ts-node/esm --test src/db/index.test.ts test/queue.test.ts && node test/runs.e2e.test.js
services/api test: > @crucible-trader/api@0.0.1 build /Users/gong/Programming/Projects/crucible-trader/services/api
services/api test: > tsc -p .
services/api test: (node:67181) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:67181) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî insertRun persists metadata and listRuns returns it (51.164ms)
services/api test: ‚úî saveRunResult stores summary and artifacts for later retrieval (2.310042ms)
services/api test: ‚úî reset clears runs and artifacts tables (1.674834ms)
services/api test: ‚úî upsertDataset persists metadata (1.377875ms)
services/api test: ‚úî risk profiles can be stored and retrieved (1.43675ms)
services/api test: (node:67182) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:67182) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî JobQueue can be instantiated with database (3.45425ms)
services/api test: ‚úî JobQueue accepts custom poll interval (1.024292ms)
services/api test: ‚úî JobQueue.onJob registers handler and starts polling (203.495459ms)
services/api test: ‚úî JobQueue processes queued jobs (202.841292ms)
services/api test: ‚úî JobQueue.stop stops polling (207.405333ms)
services/api test: ‚úî JobQueue updates job status to processing (58.089708ms)
services/api test: ‚úî JobQueue handles handler errors gracefully (107.931541ms)
services/api test: ‚úî JobQueue handles invalid JSON in requestJson (107.174709ms)
services/api test: ‚úî JobQueue supports multiple handlers (104.589583ms)
services/api test: ‚úî JobQueue.enqueue triggers immediate poll (3.808291ms)
services/api test: ‚úî JobQueue does not process same job twice (204.622292ms)
services/api test: ‚úî JobQueue ignores jobs with status other than queued (157.734917ms)
services/api test: ‚úî JobQueue processes jobs in order (328.541208ms)
services/api test: ‚Ñπ tests 18
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 18
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 2745.858583
services/api test: ‚úî POST /api/runs executes a backtest end-to-end (60.02375ms)
services/api test: ‚Ñπ tests 1
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 1
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 62.552333
services/api test: Done
services/backtest-worker test$ CRUCIBLE_WORKER_AUTOSTART=false node --loader ts-node/esm --test test/backtest-worker.test.ts
services/backtest-worker test: (node:67255) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/backtest-worker test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/backtest-worker test: (Use `node --trace-warnings ...` to show where the warning was created)
services/backtest-worker test: (node:67255) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/backtest-worker test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/backtest-worker test: [dotenv@17.2.3] injecting env (2) from ../../.env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
services/backtest-worker test: [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
services/backtest-worker test: ‚úî createManifestWriter writes manifest with defaults and dataset metadata (5.599167ms)
services/backtest-worker test: ‚úî createManifestWriter keeps explicit report path and metadata (1.752417ms)
services/backtest-worker test: ‚úî createJobHandler processes job successfully and persists result (0.526708ms)
services/backtest-worker test: ‚úî createJobHandler skips risk profile lookup when not provided (0.160625ms)
services/backtest-worker test: ‚úî createJobHandler marks runs as failed when runBacktest throws (0.350958ms)
services/backtest-worker test: ‚Ñπ tests 5
services/backtest-worker test: ‚Ñπ suites 0
services/backtest-worker test: ‚Ñπ pass 5
services/backtest-worker test: ‚Ñπ fail 0
services/backtest-worker test: ‚Ñπ cancelled 0
services/backtest-worker test: ‚Ñπ skipped 0
services/backtest-worker test: ‚Ñπ todo 0
services/backtest-worker test: ‚Ñπ duration_ms 762.984
services/backtest-worker test: Done
