Scope: 11 of 12 workspace projects
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/metrics test: (node:42006) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:42006) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/logger test: (node:42007) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:42007) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: (node:42009) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:42009) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: (node:42008) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:42008) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: ‚úî createReportManifest returns a report manifest with title (0.552792ms)
packages/report test: ‚úî createReportManifest returns expected placeholder title (0.069542ms)
packages/report test: ‚úî createReportManifest returns readonly structure (0.062542ms)
packages/report test: ‚úî createReportManifest returns new object on each call (0.451917ms)
packages/report test: ‚úî report manifest has correct interface structure (0.071584ms)
packages/report test: ‚úî report manifest title is non-empty (0.049542ms)
packages/report test: ‚úî report manifest title contains expected keywords (0.067291ms)
packages/report test: ‚Ñπ tests 7
packages/report test: ‚Ñπ suites 0
packages/report test: ‚Ñπ pass 7
packages/report test: ‚Ñπ fail 0
packages/report test: ‚Ñπ cancelled 0
packages/report test: ‚Ñπ skipped 0
packages/report test: ‚Ñπ todo 0
packages/report test: ‚Ñπ duration_ms 660.714583
packages/report test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/risk test: ‚úî createDefaultRiskLimits returns expected default values (0.571542ms)
packages/risk test: ‚úî createDefaultRiskLimits returns readonly object structure (0.102542ms)
packages/risk test: ‚úî createDefaultRiskLimits returns new object on each call (0.460083ms)
packages/risk test: ‚úî default risk limits are positive numbers (0.066167ms)
packages/risk test: ‚úî default risk limits are within reasonable ranges (0.080125ms)
packages/risk test: ‚úî default risk limits have expected property types (0.082208ms)
packages/risk test: ‚úî maxDailyLossPct default allows for reasonable drawdown (0.052375ms)
packages/risk test: ‚úî maxPositionPct default prevents over-concentration (0.049167ms)
packages/risk test: ‚úî orderCap default provides reasonable trade sizing (0.065917ms)
packages/risk test: ‚úî killSwitchDrawdownPct default protects against catastrophic losses (0.09125ms)
packages/risk test: ‚úî cooldownMinutes default allows for recovery period (0.431583ms)
packages/risk test: ‚úî risk limits are consistent with each other (0.151833ms)
packages/logger test: ‚úî createLogger returns a logger with the correct module name (0.661375ms)
packages/logger test: ‚úî logger.log writes JSON formatted output to stdout (1.929458ms)
packages/logger test: ‚úî logger.debug calls log with debug level (0.268208ms)
packages/logger test: ‚úî logger.info calls log with info level (0.189791ms)
packages/logger test: ‚úî logger.warn calls log with warn level (0.236167ms)
packages/logger test: ‚úî logger.error writes to stderr and uses error level (0.232541ms)
packages/logger test: ‚úî logger includes runId in output when provided (0.178958ms)
packages/logger test: ‚úî logger excludes runId when not a string (0.848833ms)
packages/logger test: ‚úî logger handles empty metadata (0.169541ms)
packages/logger test: ‚úî logger handles complex metadata (0.629625ms)
packages/logger test: ‚úî logger timestamp is in ISO format (0.161917ms)
packages/logger test: ‚úî multiple loggers with different modules don't interfere (0.137167ms)
packages/risk test: ‚Ñπ tests 12
packages/risk test: ‚Ñπ suites 0
packages/risk test: ‚Ñπ pass 12
packages/risk test: ‚Ñπ fail 0
packages/risk test: ‚Ñπ cancelled 0
packages/risk test: ‚Ñπ skipped 0
packages/risk test: ‚Ñπ todo 0
packages/risk test: ‚Ñπ duration_ms 711.261167
packages/risk test: Done
packages/logger test: ‚Ñπ tests 12
packages/logger test: ‚Ñπ suites 0
packages/logger test: ‚Ñπ pass 12
packages/logger test: ‚Ñπ fail 0
packages/logger test: ‚Ñπ cancelled 0
packages/logger test: ‚Ñπ skipped 0
packages/logger test: ‚Ñπ todo 0
packages/logger test: ‚Ñπ duration_ms 722.279625
packages/logger test: Done
packages/metrics test: ‚úî calculateReturns computes sequential percentage returns (1.246167ms)
packages/metrics test: ‚úî calculateReturns returns empty array for empty input (0.220917ms)
packages/metrics test: ‚úî calculateReturns returns empty array for single point (0.228834ms)
packages/metrics test: ‚úî calculateReturns handles equity of zero gracefully (0.115417ms)
packages/metrics test: ‚úî calculateReturns handles negative equity (0.067375ms)
packages/metrics test: ‚úî calculateReturns computes returns for all positive equity (0.076375ms)
packages/metrics test: ‚úî calculateReturns handles flat equity curve (0.076333ms)
packages/metrics test: ‚úî calculateSharpe returns zero when variance is zero (0.162334ms)
packages/metrics test: ‚úî calculateSharpe returns zero for empty points (0.076416ms)
packages/metrics test: ‚úî calculateSharpe returns zero for single point (0.097334ms)
packages/metrics test: ‚úî calculateSharpe computes value for increasing equity (0.084125ms)
packages/metrics test: ‚úî calculateSharpe handles flat equity curve (0.050584ms)
packages/metrics test: ‚úî calculateSharpe with custom risk-free rate (0.067ms)
packages/metrics test: ‚úî calculateSharpe handles volatile equity curve (0.047417ms)
packages/metrics test: ‚úî calculateSortino accounts for downside deviation (0.105708ms)
packages/metrics test: ‚úî calculateSortino returns zero for empty points (0.038417ms)
packages/metrics test: ‚úî calculateSortino returns zero when no downside (0.037792ms)
packages/metrics test: ‚úî calculateSortino handles all negative returns (0.041ms)
packages/metrics test: ‚úî calculateSortino with custom risk-free rate (0.0445ms)
packages/metrics test: ‚úî calculateSortino handles mixed positive and negative returns (0.03925ms)
packages/metrics test: ‚úî calculateMaxDrawdown identifies largest drop (0.069875ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for empty points (0.032375ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for single point (0.03425ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for always increasing equity (0.038167ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles severe drawdown (0.038792ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles multiple drawdowns (0.042833ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles equity going to zero (0.033833ms)
packages/metrics test: ‚úî calculateCagr handles chronological data (0.064ms)
packages/metrics test: ‚úî calculateCagr returns zero for empty points (0.043334ms)
packages/metrics test: ‚úî calculateCagr returns zero for single point (0.044167ms)
packages/metrics test: ‚úî calculateCagr computes positive value for growth (0.0525ms)
packages/metrics test: ‚úî calculateCagr computes negative value for loss (0.053958ms)
packages/metrics test: ‚úî calculateCagr handles zero starting equity (0.032916ms)
packages/metrics test: ‚úî calculateCagr handles negative equity (0.041292ms)
packages/metrics test: ‚úî calculateCagr handles invalid timestamps (0.034042ms)
packages/metrics test: ‚úî calculateCagr handles same start and end time (0.063333ms)
packages/metrics test: ‚úî calculateCagr handles multi-year period (0.038916ms)
packages/metrics test: ‚úî calculateMetricsSummary aggregates metrics (0.104916ms)
packages/metrics test: ‚úî calculateMetricsSummary returns zeros for empty points (0.042542ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalPnl correctly (0.043167ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalReturn correctly (0.04975ms)
packages/metrics test: ‚úî calculateMetricsSummary handles negative returns (0.051917ms)
packages/metrics test: ‚úî calculateMetricsSummary handles zero starting equity (0.044625ms)
packages/metrics test: ‚úî calculateMetricsSummary all metrics are finite (0.058333ms)
packages/metrics test: ‚úî calculateMetricsSummary handles large equity values (0.044167ms)
packages/metrics test: ‚Ñπ tests 45
packages/metrics test: ‚Ñπ suites 0
packages/metrics test: ‚Ñπ pass 45
packages/metrics test: ‚Ñπ fail 0
packages/metrics test: ‚Ñπ cancelled 0
packages/metrics test: ‚Ñπ skipped 0
packages/metrics test: ‚Ñπ todo 0
packages/metrics test: ‚Ñπ duration_ms 777.279167
packages/metrics test: Done
packages/sdk test: (node:42039) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:42039) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî DataRequestSchema validates valid request (1.342416ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid source (0.41025ms)
packages/sdk test: ‚úî DataRequestSchema rejects empty symbol (0.133917ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid timeframe (0.097375ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid sources (0.171291ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid timeframes (0.114625ms)
packages/sdk test: ‚úî DataRequestSchema makes adjusted optional (0.064916ms)
packages/sdk test: ‚úî DataRequestSchema rejects non-boolean adjusted (0.082583ms)
packages/sdk test: ‚úî BacktestRequestSchema validates valid request (0.384917ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty runName (0.163875ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty data array (0.091375ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects negative fees (0.131333ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-positive initialCash (0.095041ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts optional seed (0.116292ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-integer seed (0.103625ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts valid metrics array (0.532958ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects invalid metrics (0.182125ms)
packages/sdk test: ‚úî BacktestResultSchema validates valid result (0.113084ms)
packages/sdk test: ‚úî BacktestResultSchema rejects empty runId (0.076ms)
packages/sdk test: ‚úî BacktestResultSchema makes reportMd optional (0.046625ms)
packages/sdk test: ‚úî RiskProfileSchema validates valid profile (0.053333ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative percentages (0.049667ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative cooldown (0.043834ms)
packages/sdk test: ‚úî RiskProfileSchema rejects non-integer cooldown (0.052583ms)
packages/sdk test: ‚úî assertValid returns parsed data for valid input (0.548791ms)
packages/sdk test: ‚úî assertValid throws Error for invalid input (0.559625ms)
packages/sdk test: ‚úî assertValid error message includes field path (0.153792ms)
packages/sdk test: ‚úî assertValid uses default label when not provided (0.155584ms)
packages/sdk test: (node:42040) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:42040) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî sma crossover emits buy and sell signals on crossovers (2.382959ms)
packages/sdk test: ‚úî momentum strategy reacts to sustained moves (0.26425ms)
packages/sdk test: ‚úî mean reversion strategy triggers on z-score extremes (0.224833ms)
packages/sdk test: ‚úî breakout strategy emits signals on range breaks (0.270417ms)
packages/sdk test: (node:42041) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:42041) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî all strategy defaults satisfy their schemas (1.141542ms)
packages/sdk test: ‚úî invalid SMA crossover params throw schema errors (0.191209ms)
packages/sdk test: ‚Ñπ tests 34
packages/sdk test: ‚Ñπ suites 0
packages/sdk test: ‚Ñπ pass 34
packages/sdk test: ‚Ñπ fail 0
packages/sdk test: ‚Ñπ cancelled 0
packages/sdk test: ‚Ñπ skipped 0
packages/sdk test: ‚Ñπ todo 0
packages/sdk test: ‚Ñπ duration_ms 885.033583
packages/sdk test: Done
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/date-range.test.ts test/strategy-controls.test.tsx
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
packages/stats test$ node --loader ts-node/esm --test test/**/*.test.ts
apps/web test: (node:42100) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:42100) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: (node:42101) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:42101) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: (node:42099) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:42099) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚ñ∂ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ‚úî Cache invalidates after dataset change (1.681292ms)
packages/data test: ‚úî CsvSource loads, dedupes, sorts, and caches bars (11.290833ms)
packages/stats test: ‚úî runBootstrap returns valid structure (3.103834ms)
packages/stats test: ‚úî runBootstrap is reproducible with same seed (0.785708ms)
packages/stats test: ‚úî runBootstrap handles sharpe ratio (0.267834ms)
packages/stats test: ‚úî runBootstrap handles sortino ratio (0.263167ms)
packages/stats test: ‚úî runBootstrap handles total return (0.164458ms)
packages/stats test: ‚úî runBootstrap handles max drawdown (0.217583ms)
packages/stats test: ‚úî runBootstrap confidence interval contains point estimate with high probability (6.52275ms)
packages/stats test: ‚úî runBootstrap wider confidence level produces wider intervals (1.897458ms)
packages/stats test: ‚úî runBootstrap handles std_dev metric (0.237709ms)
packages/stats test: ‚úî runBootstrap throws on empty equity (0.325666ms)
packages/stats test: ‚úî interpretBootstrap produces readable output (0.108ms)
packages/stats test: ‚úî interpretBootstrap handles different metrics (0.056209ms)
packages/stats test: (node:42103) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:42103) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: ‚úî runPermutationTest returns valid structure (6.854417ms)
packages/stats test: ‚úî runPermutationTest is reproducible with same seed (0.781417ms)
packages/stats test: ‚úî runPermutationTest handles profitable strategy (0.326417ms)
packages/stats test: ‚úî runPermutationTest handles losing strategy (0.230791ms)
packages/stats test: ‚úî runPermutationTest handles max drawdown metric (0.1655ms)
packages/stats test: ‚úî runPermutationTest handles mixed wins and losses (0.200084ms)
packages/stats test: ‚úî interpretPermutationTest produces readable output for significant result (0.103583ms)
packages/stats test: ‚úî interpretPermutationTest produces readable output for non-significant result (0.066333ms)
packages/stats test: ‚úî runPermutationTest defaults alpha to 0.05 when not provided (0.078042ms)
packages/stats test: ‚Ñπ tests 21
packages/stats test: ‚Ñπ suites 0
packages/stats test: ‚Ñπ pass 21
packages/stats test: ‚Ñπ fail 0
packages/stats test: ‚Ñπ cancelled 0
packages/stats test: ‚Ñπ skipped 0
packages/stats test: ‚Ñπ todo 0
packages/stats test: ‚Ñπ duration_ms 1823.915083
packages/stats test: Done
packages/data test: (node:42104) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:42104) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî CsvSource throws descriptive error when file doesn't exist (4.596083ms)
packages/data test: ‚úî CsvSource handles malformed CSV gracefully (5.041417ms)
packages/data test: ‚úî CsvSource handles empty CSV file (4.004083ms)
packages/data test: ‚úî CsvSource handles CSV with only headers (4.705708ms)
packages/data test: ‚úî CsvSource handles missing required columns (2.618833ms)
packages/data test: ‚úî TiingoSource throws error when API key is missing (0.521084ms)
packages/data test: ‚úî TiingoSource requires start and end dates (0.168875ms)
packages/data test: ‚úî TiingoSource handles HTTP errors gracefully (2.690083ms)
packages/data test: ‚úî TiingoSource handles malformed JSON response (0.641583ms)
packages/data test: ‚úî TiingoSource handles empty response array (0.882875ms)
packages/data test: ‚úî TiingoSource handles non-array response (0.894125ms)
packages/data test: ‚úî PolygonSource throws error when API key is missing (0.222125ms)
packages/data test: ‚úî PolygonSource requires start and end dates (0.094417ms)
packages/data test: ‚úî PolygonSource handles HTTP errors (0.902041ms)
apps/web test: ‚úî apiRoute normalizes paths and uses default base (30.333125ms)
packages/data test: ‚úî PolygonSource handles missing results in response (3.804625ms)
packages/data test: ‚úî PolygonSource filters out bars with missing data (3.953ms)
packages/data test: ‚úî PolygonSource handles invalid timestamp formats (2.146375ms)
apps/web test: ‚úî apiRoute respects NEXT_PUBLIC_API_BASE_URL override (16.138291ms)
packages/data test: (node:42106) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:42106) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî slugify converts uppercase to lowercase (0.922458ms)
packages/data test: ‚úî slugify replaces spaces with underscores (0.111083ms)
packages/data test: ‚úî slugify replaces special characters with underscores (0.068ms)
packages/data test: ‚úî slugify removes leading and trailing underscores (0.093375ms)
packages/data test: ‚úî slugify collapses consecutive special characters (0.073834ms)
packages/data test: ‚úî slugify handles empty string (0.04625ms)
packages/data test: ‚úî slugify handles numeric strings (0.04925ms)
packages/data test: ‚úî slugify handles mixed alphanumeric (0.060541ms)
packages/data test: ‚úî slugify handles unicode characters (0.060417ms)
packages/data test: ‚úî sanitizeBar returns valid bar unchanged (0.555709ms)
packages/data test: ‚úî sanitizeBar returns null for null input (0.060084ms)
packages/data test: ‚úî sanitizeBar returns null for undefined input (0.041125ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is missing (0.050166ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is not a string (0.04675ms)
packages/data test: ‚úî sanitizeBar returns null when open is missing (0.048583ms)
packages/data test: ‚úî sanitizeBar returns null when open is not a number (0.043958ms)
packages/data test: ‚úî sanitizeBar returns null when high is missing (0.038584ms)
packages/data test: ‚úî sanitizeBar returns null when low is missing (0.038625ms)
packages/data test: ‚úî sanitizeBar returns null when close is missing (0.037083ms)
packages/data test: ‚úî sanitizeBar returns null when volume is missing (0.043125ms)
packages/data test: ‚úî sanitizeBar accepts bar with zero volume (0.044708ms)
packages/data test: ‚úî sanitizeBar accepts bar with negative prices (edge case) (0.044125ms)
packages/data test: ‚úî sanitizeBar filters out extra properties (0.091833ms)
packages/data test: ‚úî filterBarsForRequest includes bars within range (0.108291ms)
packages/data test: ‚úî filterBarsForRequest excludes bars before start (0.119042ms)
packages/data test: ‚úî filterBarsForRequest excludes bars after end (0.059417ms)
packages/data test: ‚úî filterBarsForRequest includes bars at exact boundaries (0.054833ms)
packages/data test: ‚úî filterBarsForRequest returns empty array when no bars match (0.059125ms)
packages/data test: ‚úî filterBarsForRequest excludes bars with invalid timestamps (0.0495ms)
packages/data test: ‚úî filterBarsForRequest handles empty bar array (0.044917ms)
packages/data test: ‚úî filterBarsForRequest handles missing start date (0.040208ms)
packages/data test: ‚úî filterBarsForRequest handles missing end date (0.054333ms)
packages/data test: ‚úî sortBarsChronologically sorts bars in ascending order (0.074042ms)
packages/data test: ‚úî sortBarsChronologically handles already sorted bars (0.052208ms)
packages/data test: ‚úî sortBarsChronologically handles empty array (0.037084ms)
packages/data test: ‚úî sortBarsChronologically handles single bar (0.053709ms)
packages/data test: ‚úî sortBarsChronologically handles bars with same timestamp (0.044167ms)
packages/data test: ‚úî sortBarsChronologically returns a new array (0.059833ms)
packages/data test: ‚úî sortBarsChronologically does not mutate original array (0.052625ms)
packages/data test: ‚úî sortBarsChronologically handles bars with invalid timestamps (0.04325ms)
packages/data test: ‚úî sortBarsChronologically handles intraday timestamps correctly (0.045709ms)
packages/data test: (node:42108) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:42108) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî PolygonSource fetches, caches, and filters aggregates (6.594958ms)
packages/data test: (node:42109) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:42109) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî TiingoSource fetches, caches, and filters bars (7.404542ms)
packages/data test: ‚úî TiingoSource clamps future end dates before requesting data (2.691416ms)
packages/data test: ‚úî TiingoSource skips HTTP requests when entire range is in the future (0.462625ms)
packages/data test: ‚úî TiingoSource retries with an earlier end date after Tiingo rejects the range (1.727583ms)
packages/data test: ‚úî TiingoSource splits long requests into multiple chunks (3.987ms)
packages/data test: ‚úî TiingoSource retries after rate limit by waiting before reissuing the same chunk (5.432375ms)
packages/data test: ‚Ñπ tests 67
packages/data test: ‚Ñπ suites 0
packages/data test: ‚Ñπ pass 67
packages/data test: ‚Ñπ fail 0
packages/data test: ‚Ñπ cancelled 0
packages/data test: ‚Ñπ skipped 0
packages/data test: ‚Ñπ todo 0
packages/data test: ‚Ñπ duration_ms 2031.675333
packages/data test: Done
apps/web test: (node:42102) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:42102) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî computeAvailableRange picks tiingo range when available (0.653708ms)
apps/web test: ‚úî computeAvailableRange aggregates auto range from remote sources (0.534375ms)
apps/web test: ‚úî computeAvailableRange falls back to csv coverage when remote missing (0.083458ms)
apps/web test: ‚úî computeAvailableRange returns null when no dataset exists (0.062834ms)
apps/web test: (node:42105) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:42105) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî generateRunName slugs strings and lowercases (0.738834ms)
apps/web test: ‚úî buildDatasetOverride returns undefined when flag or dataset missing (0.099583ms)
apps/web test: ‚úî buildDatasetOverride maps dataset fields when provided (1.376833ms)
apps/web test: ‚úî buildDatasetOverride falls back to current date when dataset is missing range (0.157292ms)
apps/web test: ‚úî buildRequestSafely returns a fully typed BacktestRequest (1.355ms)
apps/web test: ‚úî buildRequestSafely omits metrics when list is empty (0.131292ms)
apps/web test: ‚úî buildRequestSafely surfaces strategy validation errors (0.449708ms)
apps/web test: ‚úî buildRequestSafely handles optional seed and numeric coercion (0.113417ms)
apps/web test: ‚úî buildRequestSafely surfaces errors for missing run name (0.086125ms)
apps/web test: ‚úî buildRequestSafely requires non-empty symbol (0.106834ms)
apps/web test: ‚úî buildRequestSafely validates timeframe values (0.071333ms)
apps/web test: ‚úî buildRequestSafely validates date format and ordering (0.080417ms)
apps/web test: ‚úî buildRequestSafely rejects negative or invalid numeric fields (0.087334ms)
apps/web test: ‚úî buildRequestSafely applies dataset override when present (0.111083ms)
apps/web test: ‚úî buildRequestSafely validates dataset override contents (0.068917ms)
apps/web test: (node:42107) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:42107) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî mapZodIssues maps field errors to a lookup object (0.903ms)
apps/web test: ‚úî StrategyControls renders inputs with expected defaults (55.085667ms)
apps/web test: ‚úî StrategyControls surfaces field errors next to the input (3.027042ms)
apps/web test: ‚Ñπ tests 24
apps/web test: ‚Ñπ suites 0
apps/web test: ‚Ñπ pass 24
apps/web test: ‚Ñπ fail 0
apps/web test: ‚Ñπ cancelled 0
apps/web test: ‚Ñπ skipped 0
apps/web test: ‚Ñπ todo 0
apps/web test: ‚Ñπ duration_ms 3541.971292
apps/web test: Done
packages/engine test$ tsc -p tsconfig.test.json && node --test dist-test/test/engine.test.js dist-test/test/engine-integration.test.js
packages/engine test: ‚úî runBacktest fails when data source file is missing (5.05625ms)
packages/engine test: ‚úî runBacktest fails with empty data array (0.595625ms)
packages/engine test: ‚úî runBacktest fails with unknown strategy (3.069708ms)
packages/engine test: ‚úî runBacktest validates strategy parameters (1.9415ms)
packages/engine test: ‚úî runBacktest generates deterministic results with same seed (48.52675ms)
packages/engine test: ‚úî runBacktest handles zero initial cash (1.036375ms)
packages/engine test: ‚úî runBacktest handles negative costs (0.895709ms)
packages/engine test: ‚úî runBacktest creates all required artifacts (21.484708ms)
packages/engine test: ‚úî runBacktest enforces risk limits - kill switch on drawdown (22.90425ms)
packages/engine test: ‚úî runBacktest handles invalid date ranges (0.43125ms)
packages/engine test: ‚úî runBacktest validates all metric keys are recognized (18.294ms)
packages/engine test: ‚úî runBacktest executes SMA crossover strategy successfully (36.421166ms)
packages/engine test: ‚Ñπ tests 12
packages/engine test: ‚Ñπ suites 0
packages/engine test: ‚Ñπ pass 12
packages/engine test: ‚Ñπ fail 0
packages/engine test: ‚Ñπ cancelled 0
packages/engine test: ‚Ñπ skipped 0
packages/engine test: ‚Ñπ todo 0
packages/engine test: ‚Ñπ duration_ms 322.996709
packages/engine test: Done
services/api test$ pnpm run build && node --loader ts-node/esm --test src/db/index.test.ts test/queue.test.ts test/dataset-ensurer.test.ts && node test/runs.e2e.test.js
services/api test: > @crucible-trader/api@0.0.1 build /Users/gong/Programming/Projects/crucible-trader/services/api
services/api test: > tsc -p .
services/api test: (node:42352) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:42352) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî insertRun persists metadata and listRuns returns it (55.861459ms)
services/api test: ‚úî saveRunResult stores summary and artifacts for later retrieval (2.671542ms)
services/api test: ‚úî reset clears runs and artifacts tables (1.868583ms)
services/api test: ‚úî upsertDataset persists metadata (1.374291ms)
services/api test: ‚úî risk profiles can be stored and retrieved (1.856291ms)
services/api test: ‚úî stat tests can be stored and retrieved (1.585333ms)
services/api test: (node:42353) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:42353) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî clampDataRequestRange truncates future end dates (1.747042ms)
services/api test: ‚úî clampDataRequestRange snaps start to clamped end when entire range is future (0.114625ms)
services/api test: ‚úî clampDataRequestRange returns original reference when range already valid (0.612417ms)
services/api test: (node:42354) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:42354) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî JobQueue can be instantiated with database (3.728417ms)
services/api test: ‚úî JobQueue accepts custom poll interval (0.976584ms)
services/api test: ‚úî JobQueue.onJob registers handler and starts polling (203.398292ms)
services/api test: ‚úî JobQueue processes queued jobs (225.145167ms)
services/api test: ‚úî JobQueue.stop stops polling (279.572792ms)
services/api test: ‚úî JobQueue updates job status to processing (74.367125ms)
services/api test: ‚úî JobQueue handles handler errors gracefully (105.740667ms)
services/api test: ‚úî JobQueue handles invalid JSON in requestJson (108.33375ms)
services/api test: ‚úî JobQueue supports multiple handlers (103.432166ms)
services/api test: ‚úî JobQueue.enqueue triggers immediate poll (1.657916ms)
services/api test: ‚úî JobQueue does not process same job twice (202.677792ms)
services/api test: ‚úî JobQueue ignores jobs with status other than queued (163.687ms)
services/api test: ‚úî JobQueue processes jobs in order (326.192417ms)
services/api test: ‚Ñπ tests 22
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 22
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 2882.847084
services/api test: ‚úî POST /api/runs executes a backtest end-to-end (62.608875ms)
services/api test: ‚Ñπ tests 1
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 1
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 65.18225
services/api test: Done
services/backtest-worker test$ CRUCIBLE_WORKER_AUTOSTART=false node --loader ts-node/esm --test test/backtest-worker.test.ts
services/backtest-worker test: (node:42533) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/backtest-worker test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/backtest-worker test: (Use `node --trace-warnings ...` to show where the warning was created)
services/backtest-worker test: (node:42533) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/backtest-worker test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/backtest-worker test: [dotenv@17.2.3] injecting env (2) from ../../.env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
services/backtest-worker test: [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
services/backtest-worker test: ‚úî createManifestWriter writes manifest with defaults and dataset metadata (5.943708ms)
services/backtest-worker test: ‚úî createManifestWriter keeps explicit report path and metadata (1.749333ms)
services/backtest-worker test: ‚úî createJobHandler processes job successfully and persists result (0.50325ms)
services/backtest-worker test: ‚úî createJobHandler skips risk profile lookup when not provided (0.154083ms)
services/backtest-worker test: ‚úî createJobHandler marks runs as failed when runBacktest throws (0.376625ms)
services/backtest-worker test: ‚Ñπ tests 5
services/backtest-worker test: ‚Ñπ suites 0
services/backtest-worker test: ‚Ñπ pass 5
services/backtest-worker test: ‚Ñπ fail 0
services/backtest-worker test: ‚Ñπ cancelled 0
services/backtest-worker test: ‚Ñπ skipped 0
services/backtest-worker test: ‚Ñπ todo 0
services/backtest-worker test: ‚Ñπ duration_ms 778.655625
services/backtest-worker test: Done
