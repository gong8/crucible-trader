Scope: 11 of 12 workspace projects
packages/logger test$ node --loader ts-node/esm --test test/logger.test.ts
packages/metrics test$ node --loader ts-node/esm --test test/metrics.test.ts
packages/report test$ node --loader ts-node/esm --test test/report.test.ts
packages/risk test$ node --loader ts-node/esm --test test/risk.test.ts
packages/logger test: (node:58941) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/logger test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/logger test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/logger test: (node:58941) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/logger test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: (node:58942) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/report test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/report test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/report test: (node:58942) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/report test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/risk test: (node:58943) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/risk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/risk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/risk test: (node:58943) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/risk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/metrics test: (node:58940) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/metrics test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/metrics test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/metrics test: (node:58940) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/metrics test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/report test: ‚úî createReportManifest returns a report manifest with title (0.547584ms)
packages/report test: ‚úî createReportManifest returns expected placeholder title (0.070875ms)
packages/report test: ‚úî createReportManifest returns readonly structure (0.135375ms)
packages/report test: ‚úî createReportManifest returns new object on each call (0.471875ms)
packages/report test: ‚úî report manifest has correct interface structure (0.074333ms)
packages/report test: ‚úî report manifest title is non-empty (0.051458ms)
packages/report test: ‚úî report manifest title contains expected keywords (0.071791ms)
packages/report test: ‚Ñπ tests 7
packages/report test: ‚Ñπ suites 0
packages/report test: ‚Ñπ pass 7
packages/report test: ‚Ñπ fail 0
packages/report test: ‚Ñπ cancelled 0
packages/report test: ‚Ñπ skipped 0
packages/report test: ‚Ñπ todo 0
packages/report test: ‚Ñπ duration_ms 596.975416
packages/report test: Done
packages/sdk test$ node --loader ts-node/esm --test test/sdk-validation.test.ts test/strategies.test.ts test/strategy-config.test.ts
packages/risk test: ‚úî createDefaultRiskLimits returns expected default values (1.13325ms)
packages/risk test: ‚úî createDefaultRiskLimits returns readonly object structure (0.136584ms)
packages/risk test: ‚úî createDefaultRiskLimits returns new object on each call (0.48875ms)
packages/risk test: ‚úî default risk limits are positive numbers (0.112084ms)
packages/risk test: ‚úî default risk limits are within reasonable ranges (0.084708ms)
packages/risk test: ‚úî default risk limits have expected property types (0.084209ms)
packages/risk test: ‚úî maxDailyLossPct default allows for reasonable drawdown (0.055208ms)
packages/risk test: ‚úî maxPositionPct default prevents over-concentration (0.047083ms)
packages/risk test: ‚úî orderCap default provides reasonable trade sizing (0.057125ms)
packages/risk test: ‚úî killSwitchDrawdownPct default protects against catastrophic losses (0.090542ms)
packages/risk test: ‚úî cooldownMinutes default allows for recovery period (0.05475ms)
packages/risk test: ‚úî risk limits are consistent with each other (0.045667ms)
packages/risk test: ‚Ñπ tests 12
packages/risk test: ‚Ñπ suites 0
packages/risk test: ‚Ñπ pass 12
packages/risk test: ‚Ñπ fail 0
packages/risk test: ‚Ñπ cancelled 0
packages/risk test: ‚Ñπ skipped 0
packages/risk test: ‚Ñπ todo 0
packages/risk test: ‚Ñπ duration_ms 622.415083
packages/risk test: Done
packages/logger test: ‚úî createLogger returns a logger with the correct module name (0.597709ms)
packages/logger test: ‚úî logger.log writes JSON formatted output to stdout (1.563959ms)
packages/logger test: ‚úî logger.debug calls log with debug level (0.251125ms)
packages/logger test: ‚úî logger.info calls log with info level (0.198ms)
packages/logger test: ‚úî logger.warn calls log with warn level (0.177958ms)
packages/logger test: ‚úî logger.error writes to stderr and uses error level (0.190042ms)
packages/logger test: ‚úî logger includes runId in output when provided (0.168958ms)
packages/logger test: ‚úî logger excludes runId when not a string (0.760167ms)
packages/logger test: ‚úî logger handles empty metadata (0.26125ms)
packages/logger test: ‚úî logger handles complex metadata (0.633417ms)
packages/logger test: ‚úî logger timestamp is in ISO format (0.184292ms)
packages/logger test: ‚úî multiple loggers with different modules don't interfere (0.126583ms)
packages/metrics test: ‚úî calculateReturns computes sequential percentage returns (0.733166ms)
packages/metrics test: ‚úî calculateReturns returns empty array for empty input (0.081958ms)
packages/metrics test: ‚úî calculateReturns returns empty array for single point (0.068166ms)
packages/metrics test: ‚úî calculateReturns handles equity of zero gracefully (0.057792ms)
packages/metrics test: ‚úî calculateReturns handles negative equity (0.055291ms)
packages/metrics test: ‚úî calculateReturns computes returns for all positive equity (0.061ms)
packages/metrics test: ‚úî calculateReturns handles flat equity curve (0.076583ms)
packages/metrics test: ‚úî calculateSharpe returns zero when variance is zero (0.118875ms)
packages/metrics test: ‚úî calculateSharpe returns zero for empty points (0.055292ms)
packages/metrics test: ‚úî calculateSharpe returns zero for single point (0.089625ms)
packages/metrics test: ‚úî calculateSharpe computes value for increasing equity (0.066792ms)
packages/metrics test: ‚úî calculateSharpe handles flat equity curve (0.053792ms)
packages/metrics test: ‚úî calculateSharpe with custom risk-free rate (0.041667ms)
packages/metrics test: ‚úî calculateSharpe handles volatile equity curve (0.048917ms)
packages/metrics test: ‚úî calculateSortino accounts for downside deviation (0.073916ms)
packages/metrics test: ‚úî calculateSortino returns zero for empty points (0.044459ms)
packages/metrics test: ‚úî calculateSortino returns zero when no downside (0.041708ms)
packages/metrics test: ‚úî calculateSortino handles all negative returns (0.038875ms)
packages/metrics test: ‚úî calculateSortino with custom risk-free rate (0.044708ms)
packages/metrics test: ‚úî calculateSortino handles mixed positive and negative returns (0.037875ms)
packages/metrics test: ‚úî calculateMaxDrawdown identifies largest drop (0.066875ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for empty points (0.031333ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for single point (0.032583ms)
packages/metrics test: ‚úî calculateMaxDrawdown returns zero for always increasing equity (0.035625ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles severe drawdown (0.038542ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles multiple drawdowns (0.040875ms)
packages/metrics test: ‚úî calculateMaxDrawdown handles equity going to zero (0.033417ms)
packages/metrics test: ‚úî calculateCagr handles chronological data (0.06075ms)
packages/metrics test: ‚úî calculateCagr returns zero for empty points (0.039916ms)
packages/metrics test: ‚úî calculateCagr returns zero for single point (0.030875ms)
packages/metrics test: ‚úî calculateCagr computes positive value for growth (0.054292ms)
packages/metrics test: ‚úî calculateCagr computes negative value for loss (0.041958ms)
packages/metrics test: ‚úî calculateCagr handles zero starting equity (0.039709ms)
packages/metrics test: ‚úî calculateCagr handles negative equity (0.04075ms)
packages/metrics test: ‚úî calculateCagr handles invalid timestamps (0.036958ms)
packages/metrics test: ‚úî calculateCagr handles same start and end time (0.049792ms)
packages/metrics test: ‚úî calculateCagr handles multi-year period (0.049084ms)
packages/metrics test: ‚úî calculateMetricsSummary aggregates metrics (0.088958ms)
packages/metrics test: ‚úî calculateMetricsSummary returns zeros for empty points (0.039459ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalPnl correctly (0.041709ms)
packages/metrics test: ‚úî calculateMetricsSummary computes totalReturn correctly (0.042833ms)
packages/metrics test: ‚úî calculateMetricsSummary handles negative returns (0.046375ms)
packages/metrics test: ‚úî calculateMetricsSummary handles zero starting equity (0.038542ms)
packages/metrics test: ‚úî calculateMetricsSummary all metrics are finite (0.093708ms)
packages/metrics test: ‚úî calculateMetricsSummary handles large equity values (0.044167ms)
packages/logger test: ‚Ñπ tests 12
packages/logger test: ‚Ñπ suites 0
packages/logger test: ‚Ñπ pass 12
packages/logger test: ‚Ñπ fail 0
packages/logger test: ‚Ñπ cancelled 0
packages/logger test: ‚Ñπ skipped 0
packages/logger test: ‚Ñπ todo 0
packages/logger test: ‚Ñπ duration_ms 694.889208
packages/logger test: Done
packages/metrics test: ‚Ñπ tests 45
packages/metrics test: ‚Ñπ suites 0
packages/metrics test: ‚Ñπ pass 45
packages/metrics test: ‚Ñπ fail 0
packages/metrics test: ‚Ñπ cancelled 0
packages/metrics test: ‚Ñπ skipped 0
packages/metrics test: ‚Ñπ todo 0
packages/metrics test: ‚Ñπ duration_ms 701.598666
packages/metrics test: Done
packages/sdk test: (node:58973) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:58973) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî DataRequestSchema validates valid request (1.265708ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid source (0.390708ms)
packages/sdk test: ‚úî DataRequestSchema rejects empty symbol (0.122083ms)
packages/sdk test: ‚úî DataRequestSchema rejects invalid timeframe (0.092916ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid sources (0.150042ms)
packages/sdk test: ‚úî DataRequestSchema accepts all valid timeframes (0.113667ms)
packages/sdk test: ‚úî DataRequestSchema makes adjusted optional (0.069792ms)
packages/sdk test: ‚úî DataRequestSchema rejects non-boolean adjusted (0.076458ms)
packages/sdk test: ‚úî BacktestRequestSchema validates valid request (0.353958ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty runName (0.1505ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects empty data array (0.081375ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects negative fees (0.110334ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-positive initialCash (0.085583ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts optional seed (0.084125ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects non-integer seed (0.100958ms)
packages/sdk test: ‚úî BacktestRequestSchema accepts valid metrics array (0.480084ms)
packages/sdk test: ‚úî BacktestRequestSchema rejects invalid metrics (0.105792ms)
packages/sdk test: ‚úî BacktestResultSchema validates valid result (0.09025ms)
packages/sdk test: ‚úî BacktestResultSchema rejects empty runId (0.062583ms)
packages/sdk test: ‚úî BacktestResultSchema makes reportMd optional (0.04175ms)
packages/sdk test: ‚úî RiskProfileSchema validates valid profile (0.047792ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative percentages (0.047542ms)
packages/sdk test: ‚úî RiskProfileSchema rejects negative cooldown (0.05575ms)
packages/sdk test: ‚úî RiskProfileSchema rejects non-integer cooldown (0.052875ms)
packages/sdk test: ‚úî assertValid returns parsed data for valid input (0.459667ms)
packages/sdk test: ‚úî assertValid throws Error for invalid input (0.305833ms)
packages/sdk test: ‚úî assertValid error message includes field path (0.082333ms)
packages/sdk test: ‚úî assertValid uses default label when not provided (0.110459ms)
packages/sdk test: (node:58974) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:58974) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî sma crossover emits buy and sell signals on crossovers (2.119792ms)
packages/sdk test: ‚úî momentum strategy reacts to sustained moves (0.216ms)
packages/sdk test: ‚úî mean reversion strategy triggers on z-score extremes (0.210917ms)
packages/sdk test: ‚úî breakout strategy emits signals on range breaks (0.254333ms)
packages/sdk test: (node:58975) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/sdk test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/sdk test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/sdk test: (node:58975) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/sdk test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/sdk test: ‚úî all strategy defaults satisfy their schemas (1.246875ms)
packages/sdk test: ‚úî invalid SMA crossover params throw schema errors (0.195833ms)
packages/sdk test: ‚Ñπ tests 34
packages/sdk test: ‚Ñπ suites 0
packages/sdk test: ‚Ñπ pass 34
packages/sdk test: ‚Ñπ fail 0
packages/sdk test: ‚Ñπ cancelled 0
packages/sdk test: ‚Ñπ skipped 0
packages/sdk test: ‚Ñπ todo 0
packages/sdk test: ‚Ñπ duration_ms 845.153
packages/sdk test: Done
apps/web test$ TS_NODE_COMPILER_OPTIONS='{"jsx":"react-jsx","allowImportingTsExtensions":true}' node --loader ts-node/esm --test test/api.test.ts test/new-run-helpers.test.ts test/date-range.test.ts test/strategy-controls.test.tsx
packages/data test$ node --loader ts-node/esm --test test/csv-source.test.ts test/data-sources-errors.test.ts test/internal-utils.test.ts test/polygon-source.test.ts test/tiingo-source.test.ts
packages/stats test$ node --loader ts-node/esm --test test/**/*.test.ts
packages/data test: (node:59035) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:59035) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: (node:59033) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:59033) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: (node:59034) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:59034) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: ‚úî runBootstrap returns valid structure (2.234875ms)
packages/stats test: ‚úî runBootstrap is reproducible with same seed (0.760459ms)
packages/stats test: ‚úî runBootstrap handles sharpe ratio (0.249834ms)
packages/stats test: ‚úî runBootstrap handles sortino ratio (0.255334ms)
packages/stats test: ‚úî runBootstrap handles total return (0.283041ms)
packages/stats test: ‚úî runBootstrap handles max drawdown (0.287833ms)
packages/stats test: ‚úî runBootstrap confidence interval contains point estimate with high probability (5.534917ms)
packages/stats test: ‚úî runBootstrap wider confidence level produces wider intervals (1.517834ms)
packages/stats test: ‚úî runBootstrap handles std_dev metric (0.266042ms)
packages/stats test: ‚úî runBootstrap throws on empty equity (0.398709ms)
packages/stats test: ‚úî interpretBootstrap produces readable output (0.100875ms)
packages/stats test: ‚úî interpretBootstrap handles different metrics (0.064375ms)
packages/stats test: (node:59036) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/stats test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/stats test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/stats test: (node:59036) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/stats test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/stats test: ‚úî runPermutationTest returns valid structure (2.301125ms)
packages/stats test: ‚úî runPermutationTest is reproducible with same seed (0.767833ms)
packages/stats test: ‚úî runPermutationTest handles profitable strategy (0.214958ms)
packages/stats test: ‚úî runPermutationTest handles losing strategy (0.170667ms)
packages/stats test: ‚úî runPermutationTest handles max drawdown metric (0.173125ms)
packages/stats test: ‚úî runPermutationTest handles mixed wins and losses (0.2205ms)
packages/stats test: ‚úî interpretPermutationTest produces readable output for significant result (0.100208ms)
packages/stats test: ‚úî interpretPermutationTest produces readable output for non-significant result (0.062875ms)
packages/stats test: ‚úî runPermutationTest defaults alpha to 0.05 when not provided (0.073791ms)
packages/stats test: ‚Ñπ tests 21
packages/stats test: ‚Ñπ suites 0
packages/stats test: ‚Ñπ pass 21
packages/stats test: ‚Ñπ fail 0
packages/stats test: ‚Ñπ cancelled 0
packages/stats test: ‚Ñπ skipped 0
packages/stats test: ‚Ñπ todo 0
packages/stats test: ‚Ñπ duration_ms 1621.815291
packages/stats test: Done
packages/data test: ‚ñ∂ CsvSource loads, dedupes, sorts, and caches bars
packages/data test:   ‚úî Cache invalidates after dataset change (4.258958ms)
packages/data test: ‚úî CsvSource loads, dedupes, sorts, and caches bars (20.227792ms)
packages/data test: (node:59038) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:59038) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî CsvSource throws descriptive error when file doesn't exist (5.613458ms)
packages/data test: ‚úî CsvSource handles malformed CSV gracefully (6.15425ms)
packages/data test: ‚úî CsvSource handles empty CSV file (5.242916ms)
packages/data test: ‚úî CsvSource handles CSV with only headers (21.880375ms)
packages/data test: ‚úî CsvSource handles missing required columns (7.553167ms)
packages/data test: ‚úî TiingoSource throws error when API key is missing (3.714292ms)
packages/data test: ‚úî TiingoSource requires start and end dates (0.157209ms)
packages/data test: ‚úî TiingoSource handles HTTP errors gracefully (4.126458ms)
packages/data test: ‚úî TiingoSource handles malformed JSON response (1.354208ms)
packages/data test: ‚úî TiingoSource handles empty response array (1.528583ms)
packages/data test: ‚úî TiingoSource handles non-array response (1.571791ms)
packages/data test: ‚úî PolygonSource throws error when API key is missing (0.92925ms)
packages/data test: ‚úî PolygonSource requires start and end dates (0.911ms)
packages/data test: ‚úî PolygonSource handles HTTP errors (5.365625ms)
packages/data test: ‚úî PolygonSource handles missing results in response (2.8605ms)
packages/data test: ‚úî PolygonSource filters out bars with missing data (3.522834ms)
packages/data test: ‚úî PolygonSource handles invalid timestamp formats (1.975333ms)
packages/data test: (node:59039) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:59039) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî slugify converts uppercase to lowercase (3.847667ms)
packages/data test: ‚úî slugify replaces spaces with underscores (0.116083ms)
packages/data test: ‚úî slugify replaces special characters with underscores (0.066541ms)
packages/data test: ‚úî slugify removes leading and trailing underscores (0.060416ms)
packages/data test: ‚úî slugify collapses consecutive special characters (0.067875ms)
packages/data test: ‚úî slugify handles empty string (0.045083ms)
packages/data test: ‚úî slugify handles numeric strings (0.048791ms)
packages/data test: ‚úî slugify handles mixed alphanumeric (0.056083ms)
packages/data test: ‚úî slugify handles unicode characters (0.150584ms)
packages/data test: ‚úî sanitizeBar returns valid bar unchanged (0.738ms)
packages/data test: ‚úî sanitizeBar returns null for null input (0.092125ms)
packages/data test: ‚úî sanitizeBar returns null for undefined input (0.058791ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is missing (0.062458ms)
packages/data test: ‚úî sanitizeBar returns null when timestamp is not a string (0.051583ms)
packages/data test: ‚úî sanitizeBar returns null when open is missing (0.043291ms)
packages/data test: ‚úî sanitizeBar returns null when open is not a number (0.045958ms)
packages/data test: ‚úî sanitizeBar returns null when high is missing (0.040125ms)
packages/data test: ‚úî sanitizeBar returns null when low is missing (0.038542ms)
packages/data test: ‚úî sanitizeBar returns null when close is missing (0.038083ms)
packages/data test: ‚úî sanitizeBar returns null when volume is missing (0.037541ms)
packages/data test: ‚úî sanitizeBar accepts bar with zero volume (0.070583ms)
packages/data test: ‚úî sanitizeBar accepts bar with negative prices (edge case) (0.055916ms)
packages/data test: ‚úî sanitizeBar filters out extra properties (0.106667ms)
packages/data test: ‚úî filterBarsForRequest includes bars within range (0.119958ms)
packages/data test: ‚úî filterBarsForRequest excludes bars before start (0.055834ms)
packages/data test: ‚úî filterBarsForRequest excludes bars after end (0.050333ms)
packages/data test: ‚úî filterBarsForRequest includes bars at exact boundaries (0.052875ms)
packages/data test: ‚úî filterBarsForRequest returns empty array when no bars match (0.047709ms)
packages/data test: ‚úî filterBarsForRequest excludes bars with invalid timestamps (0.042208ms)
packages/data test: ‚úî filterBarsForRequest handles empty bar array (0.041167ms)
packages/data test: ‚úî filterBarsForRequest handles missing start date (0.040042ms)
packages/data test: ‚úî filterBarsForRequest handles missing end date (0.044792ms)
packages/data test: ‚úî sortBarsChronologically sorts bars in ascending order (0.078417ms)
packages/data test: ‚úî sortBarsChronologically handles already sorted bars (0.044167ms)
packages/data test: ‚úî sortBarsChronologically handles empty array (0.039958ms)
packages/data test: ‚úî sortBarsChronologically handles single bar (0.044375ms)
packages/data test: ‚úî sortBarsChronologically handles bars with same timestamp (0.054959ms)
packages/data test: ‚úî sortBarsChronologically returns a new array (0.053667ms)
packages/data test: ‚úî sortBarsChronologically does not mutate original array (0.046792ms)
packages/data test: ‚úî sortBarsChronologically handles bars with invalid timestamps (0.037791ms)
packages/data test: ‚úî sortBarsChronologically handles intraday timestamps correctly (0.043792ms)
packages/data test: (node:59042) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:59042) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî PolygonSource fetches, caches, and filters aggregates (11.879667ms)
packages/data test: (node:59043) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
packages/data test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
packages/data test: (Use `node --trace-warnings ...` to show where the warning was created)
packages/data test: (node:59043) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
packages/data test: (Use `node --trace-deprecation ...` to show where the warning was created)
packages/data test: ‚úî TiingoSource fetches, caches, and filters bars (13.891583ms)
packages/data test: ‚úî TiingoSource clamps future end dates before requesting data (1.384458ms)
packages/data test: ‚úî TiingoSource skips HTTP requests when entire range is in the future (0.3665ms)
packages/data test: ‚úî TiingoSource retries with an earlier end date after Tiingo rejects the range (1.311958ms)
packages/data test: ‚úî TiingoSource splits long requests into multiple chunks (1.596125ms)
packages/data test: ‚úî TiingoSource retries after rate limit by waiting before reissuing the same chunk (5.670583ms)
packages/data test: ‚Ñπ tests 67
packages/data test: ‚Ñπ suites 0
packages/data test: ‚Ñπ pass 67
packages/data test: ‚Ñπ fail 0
packages/data test: ‚Ñπ cancelled 0
packages/data test: ‚Ñπ skipped 0
packages/data test: ‚Ñπ todo 0
packages/data test: ‚Ñπ duration_ms 1851.030917
packages/data test: Done
apps/web test: ‚úî apiRoute normalizes paths and uses default base (29.110583ms)
apps/web test: ‚úî apiRoute respects NEXT_PUBLIC_API_BASE_URL override (2.104542ms)
apps/web test: (node:59037) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:59037) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî computeAvailableRange picks tiingo range when available (0.728375ms)
apps/web test: ‚úî computeAvailableRange aggregates auto range from remote sources (0.576375ms)
apps/web test: ‚úî computeAvailableRange falls back to csv coverage when remote missing (0.08575ms)
apps/web test: ‚úî computeAvailableRange returns null when no dataset exists (0.065334ms)
apps/web test: (node:59040) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:59040) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî generateRunName slugs strings and lowercases (0.76925ms)
apps/web test: ‚úî buildDatasetOverride returns undefined when flag or dataset missing (0.1005ms)
apps/web test: ‚úî buildDatasetOverride maps dataset fields when provided (1.299958ms)
apps/web test: ‚úî buildDatasetOverride falls back to current date when dataset is missing range (0.150792ms)
apps/web test: ‚úî buildRequestSafely returns a fully typed BacktestRequest (1.410084ms)
apps/web test: ‚úî buildRequestSafely omits metrics when list is empty (0.186541ms)
apps/web test: ‚úî buildRequestSafely surfaces strategy validation errors (0.611791ms)
apps/web test: ‚úî buildRequestSafely handles optional seed and numeric coercion (0.139625ms)
apps/web test: ‚úî buildRequestSafely surfaces errors for missing run name (0.087708ms)
apps/web test: ‚úî buildRequestSafely requires non-empty symbol (0.11575ms)
apps/web test: ‚úî buildRequestSafely validates timeframe values (0.076542ms)
apps/web test: ‚úî buildRequestSafely validates date format and ordering (0.087625ms)
apps/web test: ‚úî buildRequestSafely rejects negative or invalid numeric fields (0.105583ms)
apps/web test: ‚úî buildRequestSafely applies dataset override when present (0.12675ms)
apps/web test: ‚úî buildRequestSafely validates dataset override contents (0.089625ms)
apps/web test: (node:59041) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
apps/web test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
apps/web test: (Use `node --trace-warnings ...` to show where the warning was created)
apps/web test: (node:59041) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
apps/web test: (Use `node --trace-deprecation ...` to show where the warning was created)
apps/web test: ‚úî mapZodIssues maps field errors to a lookup object (0.851875ms)
apps/web test: ‚úî StrategyControls renders inputs with expected defaults (50.990667ms)
apps/web test: ‚úî StrategyControls surfaces field errors next to the input (2.662167ms)
apps/web test: ‚Ñπ tests 24
apps/web test: ‚Ñπ suites 0
apps/web test: ‚Ñπ pass 24
apps/web test: ‚Ñπ fail 0
apps/web test: ‚Ñπ cancelled 0
apps/web test: ‚Ñπ skipped 0
apps/web test: ‚Ñπ todo 0
apps/web test: ‚Ñπ duration_ms 2977.559375
apps/web test: Done
packages/engine test$ tsc -p tsconfig.test.json && node --test dist-test/test/engine.test.js dist-test/test/engine-integration.test.js
packages/engine test: ‚úî runBacktest fails when data source file is missing (5.062ms)
packages/engine test: ‚úî runBacktest fails with empty data array (0.715958ms)
packages/engine test: ‚úî runBacktest fails with unknown strategy (3.559542ms)
packages/engine test: ‚úî runBacktest validates strategy parameters (2.067083ms)
packages/engine test: ‚úî runBacktest generates deterministic results with same seed (48.246708ms)
packages/engine test: ‚úî runBacktest handles zero initial cash (0.924375ms)
packages/engine test: ‚úî runBacktest handles negative costs (0.94975ms)
packages/engine test: ‚úî runBacktest creates all required artifacts (21.9085ms)
packages/engine test: ‚úî runBacktest enforces risk limits - kill switch on drawdown (22.751125ms)
packages/engine test: ‚úî runBacktest handles invalid date ranges (0.521166ms)
packages/engine test: ‚úî runBacktest validates all metric keys are recognized (18.790208ms)
packages/engine test: ‚úî runBacktest executes SMA crossover strategy successfully (34.113166ms)
packages/engine test: ‚Ñπ tests 12
packages/engine test: ‚Ñπ suites 0
packages/engine test: ‚Ñπ pass 12
packages/engine test: ‚Ñπ fail 0
packages/engine test: ‚Ñπ cancelled 0
packages/engine test: ‚Ñπ skipped 0
packages/engine test: ‚Ñπ todo 0
packages/engine test: ‚Ñπ duration_ms 301.610792
packages/engine test: Done
services/api test$ pnpm run build && node --loader ts-node/esm --test src/db/index.test.ts test/queue.test.ts test/dataset-ensurer.test.ts && node test/runs.e2e.test.js
services/api test: > @crucible-trader/api@0.0.1 build /Users/gong/Programming/Projects/crucible-trader/services/api
services/api test: > tsc -p .
services/api test: (node:59186) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:59186) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî insertRun persists metadata and listRuns returns it (56.437834ms)
services/api test: ‚úî saveRunResult stores summary and artifacts for later retrieval (2.588125ms)
services/api test: ‚úî reset clears runs and artifacts tables (3.213541ms)
services/api test: ‚úî upsertDataset persists metadata (6.578416ms)
services/api test: ‚úî risk profiles can be stored and retrieved (2.376459ms)
services/api test: ‚úî stat tests can be stored and retrieved (1.591417ms)
services/api test: (node:59187) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:59187) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî clampDataRequestRange truncates future end dates (1.738958ms)
services/api test: ‚úî clampDataRequestRange snaps start to clamped end when entire range is future (0.097667ms)
services/api test: ‚úî clampDataRequestRange returns original reference when range already valid (0.070334ms)
services/api test: (node:59188) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/api test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/api test: (Use `node --trace-warnings ...` to show where the warning was created)
services/api test: (node:59188) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/api test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/api test: ‚úî JobQueue can be instantiated with database (3.675458ms)
services/api test: ‚úî JobQueue accepts custom poll interval (1.25925ms)
services/api test: ‚úî JobQueue.onJob registers handler and starts polling (206.046834ms)
services/api test: ‚úî JobQueue processes queued jobs (233.27275ms)
services/api test: ‚úî JobQueue.stop stops polling (285.14025ms)
services/api test: ‚úî JobQueue updates job status to processing (77.221542ms)
services/api test: ‚úî JobQueue handles handler errors gracefully (103.610167ms)
services/api test: ‚úî JobQueue handles invalid JSON in requestJson (106.629458ms)
services/api test: ‚úî JobQueue supports multiple handlers (105.211667ms)
services/api test: ‚úî JobQueue.enqueue triggers immediate poll (4.811875ms)
services/api test: ‚úî JobQueue does not process same job twice (203.863041ms)
services/api test: ‚úî JobQueue ignores jobs with status other than queued (158.589334ms)
services/api test: ‚úî JobQueue processes jobs in order (327.712833ms)
services/api test: ‚Ñπ tests 22
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 22
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 2866.58575
services/api test: ‚úî POST /api/runs executes a backtest end-to-end (66.009333ms)
services/api test: ‚Ñπ tests 1
services/api test: ‚Ñπ suites 0
services/api test: ‚Ñπ pass 1
services/api test: ‚Ñπ fail 0
services/api test: ‚Ñπ cancelled 0
services/api test: ‚Ñπ skipped 0
services/api test: ‚Ñπ todo 0
services/api test: ‚Ñπ duration_ms 68.835792
services/api test: Done
services/backtest-worker test$ CRUCIBLE_WORKER_AUTOSTART=false node --loader ts-node/esm --test test/backtest-worker.test.ts
services/backtest-worker test: (node:59361) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
services/backtest-worker test: --import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
services/backtest-worker test: (Use `node --trace-warnings ...` to show where the warning was created)
services/backtest-worker test: (node:59361) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
services/backtest-worker test: (Use `node --trace-deprecation ...` to show where the warning was created)
services/backtest-worker test: [dotenv@17.2.3] injecting env (2) from ../../.env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
services/backtest-worker test: [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
services/backtest-worker test: ‚úî createManifestWriter writes manifest with defaults and dataset metadata (5.895125ms)
services/backtest-worker test: ‚úî createManifestWriter keeps explicit report path and metadata (2.013ms)
services/backtest-worker test: ‚úî createJobHandler processes job successfully and persists result (0.599333ms)
services/backtest-worker test: ‚úî createJobHandler skips risk profile lookup when not provided (0.171458ms)
services/backtest-worker test: ‚úî createJobHandler marks runs as failed when runBacktest throws (0.392834ms)
services/backtest-worker test: ‚Ñπ tests 5
services/backtest-worker test: ‚Ñπ suites 0
services/backtest-worker test: ‚Ñπ pass 5
services/backtest-worker test: ‚Ñπ fail 0
services/backtest-worker test: ‚Ñπ cancelled 0
services/backtest-worker test: ‚Ñπ skipped 0
services/backtest-worker test: ‚Ñπ todo 0
services/backtest-worker test: ‚Ñπ duration_ms 759.173292
services/backtest-worker test: Done
